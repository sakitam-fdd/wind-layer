import{f as X,a as x,V as Q,d as tt}from"./Object.DdgBWT7D.js";import{M as et,U as nt}from"./Projection.Bg0YEavu.js";import{V as C}from"./ViewHint.DCjjP5DW.js";import{D as rt}from"./common.CRN0zELA.js";import{l as y,g as j,m as E,n as it,o as z,p as ot,f as M,q as w,u as b,r as at,v as st,t as U,x as ut,b as A,e as ht,i as lt,y as G,z as N,B as ft}from"./proj.BNE8J585.js";import{i as ct,e as gt}from"./easing.vFiYzKl6.js";import{f as k}from"./Polygon.DrFvfP63.js";const m={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function D(o,i,t){return function(e,n,r,a,u){if(e){if(!n&&!i)return e;var h=i?0:r[0]*n,s=i?0:r[1]*n,l=u?u[0]:0,g=u?u[1]:0,f=o[0]+h/2+l,c=o[2]-h/2+l,d=o[1]+s/2+g,v=o[3]-s/2+g;f>c&&(f=(c+f)/2,c=f),d>v&&(d=(v+d)/2,v=d);var _=y(e[0],f,c),R=y(e[1],d,v);if(a&&t&&n){var p=30*n;_+=-p*Math.log(1+Math.max(0,f-e[0])/p)+p*Math.log(1+Math.max(0,e[0]-c)/p),R+=-p*Math.log(1+Math.max(0,d-e[1])/p)+p*Math.log(1+Math.max(0,e[1]-v)/p)}return[_,R]}}}function dt(o){return o}function P(o,i,t,e){var n=j(i)/t[0],r=E(i)/t[1];return e?Math.min(o,Math.max(n,r)):Math.min(o,Math.min(n,r))}function F(o,i,t){var e=Math.min(o,i),n=50;return e*=Math.log(1+n*Math.max(0,o/i-1))/n+1,t&&(e=Math.max(e,t),e/=Math.log(1+n*Math.max(0,t/o-1))/n+1),y(e,t/2,i*2)}function vt(o,i,t,e){return function(n,r,a,u){if(n!==void 0){var h=o[0],s=o[o.length-1],l=t?P(h,t,a,e):h;if(u){var g=i!==void 0?i:!0;return g?F(n,l,s):y(n,s,l)}var f=Math.min(l,n),c=Math.floor(X(o,f,r));return o[c]>l&&c<o.length-1?o[c+1]:o[c]}else return}}function pt(o,i,t,e,n,r){return function(a,u,h,s){if(a!==void 0){var l=n?P(i,n,h,r):i,g=t!==void 0?t:0;if(s){var f=e!==void 0?e:!0;return f?F(a,l,g):y(a,g,l)}var c=1e-9,d=Math.ceil(Math.log(i/l)/Math.log(o)-c),v=-u*(.5-c)+.5,_=Math.min(l,a),R=Math.floor(Math.log(i/_)/Math.log(o)+v),p=Math.max(d,R),I=i/Math.pow(o,p);return y(I,g,l)}else return}}function H(o,i,t,e,n){return function(r,a,u,h){if(r!==void 0){var s=e?P(o,e,u,n):o,l=t!==void 0?t:!0;return!l||!h?y(r,i,s):F(r,s,i)}else return}}function _t(o){if(o!==void 0)return 0}function W(o){if(o!==void 0)return o}function Rt(o){var i=2*Math.PI/o;return function(t,e){if(e)return t;if(t!==void 0)return t=Math.floor(t/i+.5)*i,t}}function mt(o){var i=o||it(5);return function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=i?0:t}}var yt=function(){var o=function(i,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},o(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),S=0,Ct=function(o){yt(i,o);function i(t){var e=o.call(this)||this;e.on,e.once,e.un;var n=x({},t);return e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=z(n.projection,"EPSG:3857"),e.viewportSize_=[100,100],e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.nextCenter_=null,e.nextResolution_,e.nextRotation_,e.cancelAnchor_=void 0,n.projection&&ot(),n.center&&(n.center=M(n.center,e.projection_)),n.extent&&(n.extent=w(n.extent,e.projection_)),e.applyOptions_(n),e}return i.prototype.applyOptions_=function(t){var e=x({},t);for(var n in m)delete e[n];this.setProperties(e,!0);var r=K(t);this.maxResolution_=r.maxResolution,this.minResolution_=r.minResolution,this.zoomFactor_=r.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=r.minZoom;var a=Y(t),u=r.constraint,h=L(t);this.constraints_={center:a,resolution:u,rotation:h},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)},Object.defineProperty(i.prototype,"padding",{get:function(){return this.padding_},set:function(t){var e=this.padding_;this.padding_=t;var n=this.getCenter();if(n){var r=t||[0,0,0,0];e=e||[0,0,0,0];var a=this.getResolution(),u=a/2*(r[3]-e[3]+e[1]-r[1]),h=a/2*(r[0]-e[0]+e[2]-r[2]);this.setCenterInternal([n[0]+u,n[1]-h])}},enumerable:!1,configurable:!0}),i.prototype.getUpdatedOptions_=function(t){var e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),x({},e,t)},i.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var r=arguments[n];r.center&&(r=x({},r),r.center=M(r.center,this.getProjection())),r.anchor&&(r=x({},r),r.anchor=M(r.anchor,this.getProjection())),e[n]=r}this.animateInternal.apply(this,e)},i.prototype.animateInternal=function(t){var e=arguments.length,n;e>1&&typeof arguments[e-1]=="function"&&(n=arguments[e-1],--e);for(var r=0;r<e&&!this.isDef();++r){var a=arguments[r];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(r===e){n&&T(n,!0);return}for(var u=Date.now(),h=this.targetCenter_.slice(),s=this.targetResolution_,l=this.targetRotation_,g=[];r<e;++r){var f=arguments[r],c={start:u,complete:!1,anchor:f.anchor,duration:f.duration!==void 0?f.duration:1e3,easing:f.easing||ct,callback:n};if(f.center&&(c.sourceCenter=h,c.targetCenter=f.center.slice(),h=c.targetCenter),f.zoom!==void 0?(c.sourceResolution=s,c.targetResolution=this.getResolutionForZoom(f.zoom),s=c.targetResolution):f.resolution&&(c.sourceResolution=s,c.targetResolution=f.resolution,s=c.targetResolution),f.rotation!==void 0){c.sourceRotation=l;var d=b(f.rotation-l+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=l+d,l=c.targetRotation}q(c)?c.complete=!0:u+=c.duration,g.push(c)}this.animations_.push(g),this.setHint(C.ANIMATING,1),this.updateAnimations_()},i.prototype.getAnimating=function(){return this.hints_[C.ANIMATING]>0},i.prototype.getInteracting=function(){return this.hints_[C.INTERACTING]>0},i.prototype.cancelAnimations=function(){this.setHint(C.ANIMATING,-this.hints_[C.ANIMATING]);for(var t,e=0,n=this.animations_.length;e<n;++e){var r=this.animations_[e];if(r[0].callback&&T(r[0].callback,!1),!t)for(var a=0,u=r.length;a<u;++a){var h=r[a];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},i.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var r=this.animations_[n],a=!0,u=0,h=r.length;u<h;++u){var s=r[u];if(!s.complete){var l=t-s.start,g=s.duration>0?l/s.duration:1;g>=1?(s.complete=!0,g=1):a=!1;var f=s.easing(g);if(s.sourceCenter){var c=s.sourceCenter[0],d=s.sourceCenter[1],v=s.targetCenter[0],_=s.targetCenter[1];this.nextCenter_=s.targetCenter;var R=c+f*(v-c),p=d+f*(_-d);this.targetCenter_=[R,p]}if(s.sourceResolution&&s.targetResolution){var I=f===1?s.targetResolution:s.sourceResolution+f*(s.targetResolution-s.sourceResolution);if(s.anchor){var B=this.getViewportSize_(this.getRotation()),$=this.constraints_.resolution(I,0,B,!0);this.targetCenter_=this.calculateCenterZoom($,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=I,this.applyTargetState_(!0)}if(s.sourceRotation!==void 0&&s.targetRotation!==void 0){var O=f===1?b(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+f*(s.targetRotation-s.sourceRotation);if(s.anchor){var J=this.constraints_.rotation(O,!0);this.targetCenter_=this.calculateCenterRotate(J,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=O}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(a){this.animations_[n]=null,this.setHint(C.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var V=r[0].callback;V&&T(V,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},i.prototype.calculateCenterRotate=function(t,e){var n,r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-e[0],r[1]-e[1]],at(n,t-this.getRotation()),st(n,e)),n},i.prototype.calculateCenterZoom=function(t,e){var n,r=this.getCenterInternal(),a=this.getResolution();if(r!==void 0&&a!==void 0){var u=e[0]-t*(e[0]-r[0])/a,h=e[1]-t*(e[1]-r[1])/a;n=[u,h]}return n},i.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],r=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(r*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(r*Math.cos(t))]}else return e},i.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},i.prototype.getCenter=function(){var t=this.getCenterInternal();return t&&U(t,this.getProjection())},i.prototype.getCenterInternal=function(){return this.get(m.CENTER)},i.prototype.getConstraints=function(){return this.constraints_},i.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},i.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},i.prototype.calculateExtent=function(t){var e=this.calculateExtentInternal(t);return ut(e,this.getProjection())},i.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSizeMinusPadding_(),n=this.getCenterInternal();A(n,1);var r=this.getResolution();A(r!==void 0,2);var a=this.getRotation();return A(a!==void 0,3),ht(n,r,a,e)},i.prototype.getMaxResolution=function(){return this.maxResolution_},i.prototype.getMinResolution=function(){return this.minResolution_},i.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},i.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},i.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},i.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},i.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},i.prototype.getProjection=function(){return this.projection_},i.prototype.getResolution=function(){return this.get(m.RESOLUTION)},i.prototype.getResolutions=function(){return this.resolutions_},i.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(w(t,this.getProjection()),e)},i.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSizeMinusPadding_(),r=j(t)/n[0],a=E(t)/n[1];return Math.max(r,a)},i.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,a=Math.log(n/r)/Math.log(e);return function(u){var h=n/Math.pow(e,u*a);return h}},i.prototype.getRotation=function(){return this.get(m.ROTATION)},i.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,a=Math.log(n/r)/e;return function(u){var h=Math.log(n/u)/e/a;return h}},i.prototype.getViewportSizeMinusPadding_=function(t){var e=this.getViewportSize_(t),n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e},i.prototype.getState=function(){var t=this.getProjection(),e=this.getResolution(),n=this.getRotation(),r=this.getCenterInternal(),a=this.padding_;if(a){var u=this.getViewportSizeMinusPadding_();r=Z(r,this.getViewportSize_(),[u[0]/2+a[3],u[1]/2+a[0]],e,n)}return{center:r.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}},i.prototype.getZoom=function(){var t,e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t},i.prototype.getZoomForResolution=function(t){var e=this.minZoom_||0,n,r;if(this.resolutions_){var a=X(this.resolutions_,t,1);e=a,n=this.resolutions_[a],a==this.resolutions_.length-1?r=2:r=n/this.resolutions_[a+1]}else n=this.maxResolution_,r=this.zoomFactor_;return e+Math.log(n/t)/Math.log(r)},i.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=y(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,y(t-e,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},i.prototype.fit=function(t,e){var n;if(A(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){A(!lt(t),25);var r=w(t,this.getProjection());n=k(r)}else if(t.getType()==="Circle"){var r=w(t.getExtent(),this.getProjection());n=k(r),n.rotate(this.getRotation(),G(r))}else{var a=ft();a?n=t.clone().transform(a,this.getProjection()):n=t}this.fitInternal(n,e)},i.prototype.rotatedExtentForGeometry=function(t){for(var e=this.getRotation(),n=Math.cos(e),r=Math.sin(-e),a=t.getFlatCoordinates(),u=t.getStride(),h=1/0,s=1/0,l=-1/0,g=-1/0,f=0,c=a.length;f<c;f+=u){var d=a[f]*n-a[f+1]*r,v=a[f]*r+a[f+1]*n;h=Math.min(h,d),s=Math.min(s,v),l=Math.max(l,d),g=Math.max(g,v)}return[h,s,l,g]},i.prototype.fitInternal=function(t,e){var n=e||{},r=n.size;r||(r=this.getViewportSizeMinusPadding_());var a=n.padding!==void 0?n.padding:[0,0,0,0],u=n.nearest!==void 0?n.nearest:!1,h;n.minResolution!==void 0?h=n.minResolution:n.maxZoom!==void 0?h=this.getResolutionForZoom(n.maxZoom):h=0;var s=this.rotatedExtentForGeometry(t),l=this.getResolutionForExtentInternal(s,[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);l=isNaN(l)?h:Math.max(l,h),l=this.getConstrainedResolution(l,u?0:1);var g=this.getRotation(),f=Math.sin(g),c=Math.cos(g),d=G(s);d[0]+=(a[1]-a[3])/2*l,d[1]+=(a[0]-a[2])/2*l;var v=d[0]*c-d[1]*f,_=d[1]*c+d[0]*f,R=this.getConstrainedCenter([v,_],l),p=n.callback?n.callback:Q;n.duration!==void 0?this.animateInternal({resolution:l,center:R,duration:n.duration,easing:n.easing},p):(this.targetResolution_=l,this.targetCenter_=R,this.applyTargetState_(!1,!0),T(p,!0))},i.prototype.centerOn=function(t,e,n){this.centerOnInternal(M(t,this.getProjection()),e,n)},i.prototype.centerOnInternal=function(t,e,n){this.setCenterInternal(Z(t,e,n,this.getResolution(),this.getRotation()))},i.prototype.calculateCenterShift=function(t,e,n,r){var a,u=this.padding_;if(u&&t){var h=this.getViewportSizeMinusPadding_(-n),s=Z(t,r,[h[0]/2+u[3],h[1]/2+u[0]],e,n);a=[t[0]-s[0],t[1]-s[1]]}return a},i.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},i.prototype.adjustCenter=function(t){var e=U(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},i.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},i.prototype.adjustResolution=function(t,e){var n=e&&M(e,this.getProjection());this.adjustResolutionInternal(t,n)},i.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*t,0,r,n);e&&(this.targetCenter_=this.calculateCenterZoom(a,e)),this.targetResolution_*=t,this.applyTargetState_()},i.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},i.prototype.adjustRotation=function(t,e){e&&(e=M(e,this.getProjection())),this.adjustRotationInternal(t,e)},i.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(r,e)),this.targetRotation_+=t,this.applyTargetState_()},i.prototype.setCenter=function(t){this.setCenterInternal(t&&M(t,this.getProjection()))},i.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},i.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},i.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},i.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},i.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},i.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,r=this.constraints_.rotation(this.targetRotation_,n),a=this.getViewportSize_(r),u=this.constraints_.resolution(this.targetResolution_,0,a,n),h=this.constraints_.center(this.targetCenter_,u,a,n,this.calculateCenterShift(this.targetCenter_,u,r,a));this.get(m.ROTATION)!==r&&this.set(m.ROTATION,r),this.get(m.RESOLUTION)!==u&&(this.set(m.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(m.CENTER)||!N(this.get(m.CENTER),h))&&this.set(m.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},i.prototype.resolveConstraints=function(t,e,n){var r=t!==void 0?t:200,a=e||0,u=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(u),s=this.constraints_.resolution(this.targetResolution_,a,h),l=this.constraints_.center(this.targetCenter_,s,h,!1,this.calculateCenterShift(this.targetCenter_,s,u,h));if(r===0&&!this.cancelAnchor_){this.targetResolution_=s,this.targetRotation_=u,this.targetCenter_=l,this.applyTargetState_();return}var g=n||(r===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==s||this.getRotation()!==u||!this.getCenterInternal()||!N(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:u,center:l,resolution:s,duration:r,easing:gt,anchor:g}))},i.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(C.INTERACTING,1)},i.prototype.endInteraction=function(t,e,n){var r=n&&M(n,this.getProjection());this.endInteractionInternal(t,e,r)},i.prototype.endInteractionInternal=function(t,e,n){this.setHint(C.INTERACTING,-1),this.resolveConstraints(t,e,n)},i.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},i.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},i.prototype.getConstrainedResolution=function(t,e){var n=e||0,r=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,r)},i}(tt);function T(o,i){setTimeout(function(){o(i)},0)}function Y(o){if(o.extent!==void 0){var i=o.smoothExtentConstraint!==void 0?o.smoothExtentConstraint:!0;return D(o.extent,o.constrainOnlyCenter,i)}var t=z(o.projection,"EPSG:3857");if(o.multiWorld!==!0&&t.isGlobal()){var e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,D(e,!1,!1)}return dt}function K(o){var i,t,e,n=28,r=2,a=o.minZoom!==void 0?o.minZoom:S,u=o.maxZoom!==void 0?o.maxZoom:n,h=o.zoomFactor!==void 0?o.zoomFactor:r,s=o.multiWorld!==void 0?o.multiWorld:!1,l=o.smoothResolutionConstraint!==void 0?o.smoothResolutionConstraint:!0,g=o.showFullExtent!==void 0?o.showFullExtent:!1,f=z(o.projection,"EPSG:3857"),c=f.getExtent(),d=o.constrainOnlyCenter,v=o.extent;if(!s&&!v&&f.isGlobal()&&(d=!1,v=c),o.resolutions!==void 0){var _=o.resolutions;t=_[a],e=_[u]!==void 0?_[u]:_[_.length-1],o.constrainResolution?i=vt(_,l,!d&&v,g):i=H(t,e,l,!d&&v,g)}else{var R=c?Math.max(j(c),E(c)):360*et[nt.DEGREES]/f.getMetersPerUnit(),p=R/rt/Math.pow(r,S),I=p/Math.pow(r,n-S);t=o.maxResolution,t!==void 0?a=0:t=p/Math.pow(h,a),e=o.minResolution,e===void 0&&(o.maxZoom!==void 0?o.maxResolution!==void 0?e=t/Math.pow(h,u):e=p/Math.pow(h,u):e=I),u=a+Math.floor(Math.log(t/e)/Math.log(h)),e=t/Math.pow(h,u-a),o.constrainResolution?i=pt(h,t,e,l,!d&&v,g):i=H(t,e,l,!d&&v,g)}return{constraint:i,maxResolution:t,minResolution:e,minZoom:a,zoomFactor:h}}function L(o){var i=o.enableRotation!==void 0?o.enableRotation:!0;if(i){var t=o.constrainRotation;return t===void 0||t===!0?mt():t===!1?W:typeof t=="number"?Rt(t):W}else return _t}function q(o){return!(o.sourceCenter&&o.targetCenter&&!N(o.sourceCenter,o.targetCenter)||o.sourceResolution!==o.targetResolution||o.sourceRotation!==o.targetRotation)}function Z(o,i,t,e,n){var r=Math.cos(-n),a=Math.sin(-n),u=o[0]*r-o[1]*a,h=o[1]*r+o[0]*a;u+=(i[0]/2-t[0])*e,h+=(t[1]-i[1]/2)*e,a=-a;var s=u*r-h*a,l=h*r+u*a;return[s,l]}const Zt=Object.freeze(Object.defineProperty({__proto__:null,createCenterConstraint:Y,createResolutionConstraint:K,createRotationConstraint:L,default:Ct,isNoopAnimation:q},Symbol.toStringTag,{value:"Module"}));export{Ct as V,Zt as a,_t as d};
