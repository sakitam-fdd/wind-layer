import{T as M,D as Ae,l as _,O as W,u as m,B as ue,a as Re,c as De,E as f,g as Xe,V as Ie,b as Qe,d as ce,e as Je,F as B}from"./Object.DdgBWT7D.js";import{a as ee,w as et,g as tt,b as R,c as oe,d as nt,t as rt,f as it,e as Ee,i as ot,h as Ce,j as at,k as st,s as lt,r as Ne,l as ut}from"./proj.BNE8J585.js";import{c as ct,m as ht,a as we,b as Pe}from"./transform.CU9krZJA.js";import{s as Se,c as dt,C as q,a as he,b as Te,d as G}from"./canvas.BECzGFiW.js";import{i as $,R as ft,a as K,B as pt,L as Me}from"./Event.BTHd1TaF.js";import{r as _t,a as ae,b as vt,c as Oe}from"./dom.i4NIYYs1.js";import{C as E,a as O}from"./Collection.Dt_lAS1Y.js";import{P as Ke,D as be,W as yt,M as gt,F as mt}from"./has.DEIyT5tI.js";import{T as H}from"./TileState.DENk7BAX.js";import{V as A,d as Ve}from"./View.DhZUK50u.js";import{V as z}from"./ViewHint.DCjjP5DW.js";import{h as xe}from"./size.DSor2vHC.js";import{e as b,l as Et}from"./easing.vFiYzKl6.js";import{P as Ct}from"./Polygon.DrFvfP63.js";import"./Projection.Bg0YEavu.js";import"./common.CRN0zELA.js";import"./inflate.CR1fXO-E.js";import"./intersectsextent.DO7gmjzY.js";var wt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Pt=function(o){wt(r,o);function r(e){var t=o.call(this)||this;return t.map_=e,t}return r.prototype.dispatchRenderEvent=function(e,t){ee()},r.prototype.calculateMatrices2D=function(e){var t=e.viewState,n=e.coordinateToPixelTransform,i=e.pixelToCoordinateTransform;ct(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),ht(i,n)},r.prototype.forEachFeatureAtCoordinate=function(e,t,n,i,a,s,u,l){var c,h=t.viewState;function d(C,S,qe,Ye){return a.call(s,S,C?qe:null,Ye)}var p=h.projection,g=et(e.slice(),p),w=[[0,0]];if(p.canWrapX()&&i){var N=p.getExtent(),_e=tt(N);w.push([-_e,0],[_e,0])}for(var ve=t.layerStatesArray,$e=ve.length,D=[],X=[],j=0;j<w.length;j++)for(var Q=$e-1;Q>=0;--Q){var J=ve[Q],k=J.layer;if(k.hasRenderer()&&$(J,h)&&u.call(l,k)){var ye=k.getRenderer(),ge=k.getSource();if(ye&&ge){var me=ge.getWrapX()?g:e,Ue=d.bind(null,J.managed);X[0]=me[0]+w[j][0],X[1]=me[1]+w[j][1],c=ye.forEachFeatureAtCoordinate(X,t,n,Ue,D)}if(c)return c}}if(D.length!==0){var Be=1/D.length;return D.forEach(function(C,S){return C.distanceSq+=S*Be}),D.sort(function(C,S){return C.distanceSq-S.distanceSq}),D.some(function(C){return c=C.callback(C.feature,C.layer,C.geometry)}),c}},r.prototype.forEachLayerAtPixel=function(e,t,n,i,a){return ee()},r.prototype.hasFeatureAtCoordinate=function(e,t,n,i,a,s){var u=this.forEachFeatureAtCoordinate(e,t,n,i,M,this,a,s);return u!==void 0},r.prototype.getMap=function(){return this.map_},r.prototype.renderFrame=function(e){ee()},r.prototype.scheduleExpireIconCache=function(e){Se.canExpireCache()&&e.postRenderFunctions.push(Tt)},r}(Ae);function Tt(o,r){Se.expire()}const Ot=Pt;var xt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Lt=function(o){xt(r,o);function r(e){var t=o.call(this,e)||this;t.fontChangeListenerKey_=_(dt,W.PROPERTYCHANGE,e.redrawText.bind(e)),t.element_=document.createElement("div");var n=t.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",t.element_.className=q+" ol-layers";var i=e.getViewport();return i.insertBefore(t.element_,i.firstChild||null),t.children_=[],t.renderedVisible_=!0,t}return r.prototype.dispatchRenderEvent=function(e,t){var n=this.getMap();if(n.hasListener(e)){var i=new ft(e,void 0,t);n.dispatchEvent(i)}},r.prototype.disposeInternal=function(){m(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),o.prototype.disposeInternal.call(this)},r.prototype.renderFrame=function(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(K.PRECOMPOSE,e);var t=e.layerStatesArray.sort(function(p,g){return p.zIndex-g.zIndex}),n=e.viewState;this.children_.length=0;for(var i=[],a=null,s=0,u=t.length;s<u;++s){var l=t[s];e.layerIndex=s;var c=l.layer,h=c.getSourceState();if(!$(l,n)||h!="ready"&&h!="undefined"){c.unrender();continue}var d=c.render(e,a);d&&(d!==a&&(this.children_.push(d),a=d),"getDeclutter"in c&&i.push(c))}for(var s=i.length-1;s>=0;--s)i[s].renderDeclutter(e);_t(this.element_,this.children_),this.dispatchRenderEvent(K.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)},r.prototype.forEachLayerAtPixel=function(e,t,n,i,a){for(var s=t.viewState,u=t.layerStatesArray,l=u.length,c=l-1;c>=0;--c){var h=u[c],d=h.layer;if(d.hasRenderer()&&$(h,s)&&a(d)){var p=d.getRenderer(),g=p.getDataAtPixel(e,t,n);if(g){var w=i(d,g);if(w)return w}}}},r}(Ot);const At=Lt;var Fe=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),x=function(o){Fe(r,o);function r(e,t){var n=o.call(this,e)||this;return n.layer=t,n}return r}(ue),te={LAYERS:"layers"},Rt=function(o){Fe(r,o);function r(e){var t=this,n=e||{},i=Re({},n);delete i.layers;var a=n.layers;return t=o.call(this,i)||this,t.on,t.once,t.un,t.layersListenerKeys_=[],t.listenerKeys_={},t.addChangeListener(te.LAYERS,t.handleLayersChanged_),a?Array.isArray(a)?a=new E(a.slice(),{unique:!0}):R(typeof a.getArray=="function",43):a=new E(void 0,{unique:!0}),t.setLayers(a),t}return r.prototype.handleLayerChange_=function(){this.changed()},r.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(m),this.layersListenerKeys_.length=0;var e=this.getLayers();this.layersListenerKeys_.push(_(e,O.ADD,this.handleLayersAdd_,this),_(e,O.REMOVE,this.handleLayersRemove_,this));for(var t in this.listenerKeys_)this.listenerKeys_[t].forEach(m);De(this.listenerKeys_);for(var n=e.getArray(),i=0,a=n.length;i<a;i++){var s=n[i];this.registerLayerListeners_(s),this.dispatchEvent(new x("addlayer",s))}this.changed()},r.prototype.registerLayerListeners_=function(e){var t=[_(e,W.PROPERTYCHANGE,this.handleLayerChange_,this),_(e,f.CHANGE,this.handleLayerChange_,this)];e instanceof r&&t.push(_(e,"addlayer",this.handleLayerGroupAdd_,this),_(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[oe(e)]=t},r.prototype.handleLayerGroupAdd_=function(e){this.dispatchEvent(new x("addlayer",e.layer))},r.prototype.handleLayerGroupRemove_=function(e){this.dispatchEvent(new x("removelayer",e.layer))},r.prototype.handleLayersAdd_=function(e){var t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new x("addlayer",t)),this.changed()},r.prototype.handleLayersRemove_=function(e){var t=e.element,n=oe(t);this.listenerKeys_[n].forEach(m),delete this.listenerKeys_[n],this.dispatchEvent(new x("removelayer",t)),this.changed()},r.prototype.getLayers=function(){return this.get(te.LAYERS)},r.prototype.setLayers=function(e){var t=this.getLayers();if(t)for(var n=t.getArray(),i=0,a=n.length;i<a;++i)this.dispatchEvent(new x("removelayer",n[i]));this.set(te.LAYERS,e)},r.prototype.getLayersArray=function(e){var t=e!==void 0?e:[];return this.getLayers().forEach(function(n){n.getLayersArray(t)}),t},r.prototype.getLayerStatesArray=function(e){var t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(c){c.getLayerStatesArray(t)});var i=this.getLayerState(),a=i.zIndex;!e&&i.zIndex===void 0&&(a=0);for(var s=n,u=t.length;s<u;s++){var l=t[s];l.opacity*=i.opacity,l.visible=l.visible&&i.visible,l.maxResolution=Math.min(l.maxResolution,i.maxResolution),l.minResolution=Math.max(l.minResolution,i.minResolution),l.minZoom=Math.max(l.minZoom,i.minZoom),l.maxZoom=Math.min(l.maxZoom,i.maxZoom),i.extent!==void 0&&(l.extent!==void 0?l.extent=nt(l.extent,i.extent):l.extent=i.extent),l.zIndex===void 0&&(l.zIndex=a)}return t},r.prototype.getSourceState=function(){return"ready"},r}(pt);const Y=Rt;var Dt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),I=function(o){Dt(r,o);function r(e,t,n){var i=o.call(this,e)||this;return i.map=t,i.frameState=n!==void 0?n:null,i}return r}(ue),It=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),P=function(o){It(r,o);function r(e,t,n,i,a,s){var u=o.call(this,e,t,a)||this;return u.originalEvent=n,u.pixel_=null,u.coordinate_=null,u.dragging=i!==void 0?i:!1,u.activePointers=s,u}return Object.defineProperty(r.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(e){this.pixel_=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(e){this.coordinate_=e},enumerable:!1,configurable:!0}),r.prototype.preventDefault=function(){o.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},r.prototype.stopPropagation=function(){o.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},r}(I);const v={SINGLECLICK:"singleclick",CLICK:f.CLICK,DBLCLICK:f.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},se={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Nt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),St=function(o){Nt(r,o);function r(e,t){var n=o.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.emulateClicks_=!1,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=t===void 0?1:t,n.down_=null;var i=n.map_.getViewport();return n.activePointers_=[],n.trackedTouches_={},n.element_=i,n.pointerdownListenerKey_=_(i,se.POINTERDOWN,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=_(i,se.POINTERMOVE,n.relayMoveEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(f.TOUCHMOVE,n.boundHandleTouchMove_,Ke?{passive:!1}:!1),n}return r.prototype.emulateClick_=function(e){var t=new P(v.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new P(v.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout((function(){this.clickTimeoutId_=void 0;var n=new P(v.SINGLECLICK,this.map_,e);this.dispatchEvent(n)}).bind(this),250)},r.prototype.updateActivePointers_=function(e){var t=e,n=t.pointerId;if(t.type==v.POINTERUP||t.type==v.POINTERCANCEL){delete this.trackedTouches_[n];for(var i in this.trackedTouches_)if(this.trackedTouches_[i].target!==t.target){delete this.trackedTouches_[i];break}}else(t.type==v.POINTERDOWN||t.type==v.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Xe(this.trackedTouches_)},r.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new P(v.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(m),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},r.prototype.isMouseActionButton_=function(e){return e.button===0},r.prototype.handlePointerDown_=function(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);var t=new P(v.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.down_={};for(var n in e){var i=e[n];this.down_[n]=typeof i=="function"?Ie:i}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(_(a,v.POINTERMOVE,this.handlePointerMove_,this),_(a,v.POINTERUP,this.handlePointerUp_,this),_(this.element_,v.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(_(this.element_.getRootNode(),v.POINTERUP,this.handlePointerUp_,this))}},r.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;var t=new P(v.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}},r.prototype.relayMoveEvent_=function(e){this.originalPointerMoveEvent_=e;var t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new P(v.POINTERMOVE,this.map_,e,t))},r.prototype.handleTouchMove_=function(e){var t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()},r.prototype.isMoving_=function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},r.prototype.disposeInternal=function(){this.relayedListenerKey_&&(m(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(f.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(m(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(m),this.dragListenerKeys_.length=0,this.element_=null,o.prototype.disposeInternal.call(this)},r}(Qe);const Mt=St,T={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},y={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var U=1/0,Kt=function(){function o(r,e){this.priorityFunction_=r,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return o.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,De(this.queuedElements_)},o.prototype.dequeue=function(){var r=this.elements_,e=this.priorities_,t=r[0];r.length==1?(r.length=0,e.length=0):(r[0]=r.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(t);return delete this.queuedElements_[n],t},o.prototype.enqueue=function(r){R(!(this.keyFunction_(r)in this.queuedElements_),31);var e=this.priorityFunction_(r);return e!=U?(this.elements_.push(r),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(r)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},o.prototype.getCount=function(){return this.elements_.length},o.prototype.getLeftChildIndex_=function(r){return r*2+1},o.prototype.getRightChildIndex_=function(r){return r*2+2},o.prototype.getParentIndex_=function(r){return r-1>>1},o.prototype.heapify_=function(){var r;for(r=(this.elements_.length>>1)-1;r>=0;r--)this.siftUp_(r)},o.prototype.isEmpty=function(){return this.elements_.length===0},o.prototype.isKeyQueued=function(r){return r in this.queuedElements_},o.prototype.isQueued=function(r){return this.isKeyQueued(this.keyFunction_(r))},o.prototype.siftUp_=function(r){for(var e=this.elements_,t=this.priorities_,n=e.length,i=e[r],a=t[r],s=r;r<n>>1;){var u=this.getLeftChildIndex_(r),l=this.getRightChildIndex_(r),c=l<n&&t[l]<t[u]?l:u;e[r]=e[c],t[r]=t[c],r=c}e[r]=i,t[r]=a,this.siftDown_(s,r)},o.prototype.siftDown_=function(r,e){for(var t=this.elements_,n=this.priorities_,i=t[e],a=n[e];e>r;){var s=this.getParentIndex_(e);if(n[s]>a)t[e]=t[s],n[e]=n[s],e=s;else break}t[e]=i,n[e]=a},o.prototype.reprioritize=function(){var r=this.priorityFunction_,e=this.elements_,t=this.priorities_,n=0,i=e.length,a,s,u;for(s=0;s<i;++s)a=e[s],u=r(a),u==U?delete this.queuedElements_[this.keyFunction_(a)]:(t[n]=u,e[n++]=a);e.length=n,t.length=n,this.heapify_()},o}();const bt=Kt;var Vt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Ft=function(o){Vt(r,o);function r(e,t){var n=o.call(this,function(i){return e.apply(null,i)},function(i){return i[0].getKey()})||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=t,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return r.prototype.enqueue=function(e){var t=o.prototype.enqueue.call(this,e);if(t){var n=e[0];n.addEventListener(f.CHANGE,this.boundHandleTileChange_)}return t},r.prototype.getTilesLoading=function(){return this.tilesLoading_},r.prototype.handleTileChange=function(e){var t=e.target,n=t.getState();if(n===H.LOADED||n===H.ERROR||n===H.EMPTY){t.removeEventListener(f.CHANGE,this.boundHandleTileChange_);var i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},r.prototype.loadMoreTiles=function(e,t){for(var n=0,i,a,s;this.tilesLoading_<e&&n<t&&this.getCount()>0;)a=this.dequeue()[0],s=a.getKey(),i=a.getState(),i===H.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++n,a.load())},r}(bt);const jt=Ft;function kt(o,r,e,t,n){if(!o||!(e in o.wantedTiles)||!o.wantedTiles[e][r.getKey()])return U;var i=o.viewState.center,a=t[0]-i[0],s=t[1]-i[1];return 65536*Math.log(n)+Math.sqrt(a*a+s*s)/n}var Gt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}();function je(o){if(o instanceof Me){o.setMapInternal(null);return}o instanceof Y&&o.getLayers().forEach(je)}function ke(o,r){if(o instanceof Me){o.setMapInternal(r);return}if(o instanceof Y)for(var e=o.getLayers().getArray(),t=0,n=e.length;t<n;++t)ke(e[t],r)}var Ht=function(o){Gt(r,o);function r(e){var t=o.call(this)||this;t.on,t.once,t.un;var n=zt(e);t.renderComplete_,t.loaded_=!0,t.boundHandleBrowserEvent_=t.handleBrowserEvent.bind(t),t.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,t.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:be,t.postRenderTimeoutHandle_,t.animationDelayKey_,t.animationDelay_=(function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}).bind(t),t.coordinateToPixelTransform_=we(),t.pixelToCoordinateTransform_=we(),t.frameIndex_=0,t.frameState_=null,t.previousExtent_=null,t.viewPropertyListenerKey_=null,t.viewChangeListenerKey_=null,t.layerGroupPropertyListenerKeys_=null,t.viewport_=document.createElement("div"),t.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),t.viewport_.style.position="relative",t.viewport_.style.overflow="hidden",t.viewport_.style.width="100%",t.viewport_.style.height="100%",t.overlayContainer_=document.createElement("div"),t.overlayContainer_.style.position="absolute",t.overlayContainer_.style.zIndex="0",t.overlayContainer_.style.width="100%",t.overlayContainer_.style.height="100%",t.overlayContainer_.style.pointerEvents="none",t.overlayContainer_.className="ol-overlaycontainer",t.viewport_.appendChild(t.overlayContainer_),t.overlayContainerStopEvent_=document.createElement("div"),t.overlayContainerStopEvent_.style.position="absolute",t.overlayContainerStopEvent_.style.zIndex="0",t.overlayContainerStopEvent_.style.width="100%",t.overlayContainerStopEvent_.style.height="100%",t.overlayContainerStopEvent_.style.pointerEvents="none",t.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",t.viewport_.appendChild(t.overlayContainerStopEvent_),t.mapBrowserEventHandler_=null,t.moveTolerance_=e.moveTolerance,t.keyboardEventTarget_=n.keyboardEventTarget,t.targetChangeHandlerKeys_=null,t.controls=n.controls||new E,t.interactions=n.interactions||new E,t.overlays_=n.overlays,t.overlayIdIndex_={},t.renderer_=null,t.postRenderFunctions_=[],t.tileQueue_=new jt(t.getTilePriority.bind(t),t.handleTileChange_.bind(t)),t.addChangeListener(y.LAYERGROUP,t.handleLayerGroupChanged_),t.addChangeListener(y.VIEW,t.handleViewChanged_),t.addChangeListener(y.SIZE,t.handleSizeChanged_),t.addChangeListener(y.TARGET,t.handleTargetChanged_),t.setProperties(n.values);var i=t;return e.view&&!(e.view instanceof A)&&e.view.then(function(a){i.setView(new A(a))}),t.controls.addEventListener(O.ADD,(function(a){a.element.setMap(this)}).bind(t)),t.controls.addEventListener(O.REMOVE,(function(a){a.element.setMap(null)}).bind(t)),t.interactions.addEventListener(O.ADD,(function(a){a.element.setMap(this)}).bind(t)),t.interactions.addEventListener(O.REMOVE,(function(a){a.element.setMap(null)}).bind(t)),t.overlays_.addEventListener(O.ADD,(function(a){this.addOverlayInternal_(a.element)}).bind(t)),t.overlays_.addEventListener(O.REMOVE,(function(a){var s=a.element,u=s.getId();u!==void 0&&delete this.overlayIdIndex_[u.toString()],a.element.setMap(null)}).bind(t)),t.controls.forEach((function(a){a.setMap(this)}).bind(t)),t.interactions.forEach((function(a){a.setMap(this)}).bind(t)),t.overlays_.forEach(t.addOverlayInternal_.bind(t)),t}return r.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},r.prototype.addControl=function(e){this.getControls().push(e)},r.prototype.addInteraction=function(e){this.getInteractions().push(e)},r.prototype.addLayer=function(e){var t=this.getLayerGroup().getLayers();t.push(e)},r.prototype.handleLayerAdd_=function(e){ke(e.layer,this)},r.prototype.addOverlay=function(e){this.getOverlays().push(e)},r.prototype.addOverlayInternal_=function(e){var t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},r.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),o.prototype.disposeInternal.call(this)},r.prototype.forEachFeatureAtPixel=function(e,t,n){if(!(!this.frameState_||!this.renderer_)){var i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};var a=n.hitTolerance!==void 0?n.hitTolerance:0,s=n.layerFilter!==void 0?n.layerFilter:M,u=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,u,t,null,s,null)}},r.prototype.getFeaturesAtPixel=function(e,t){var n=[];return this.forEachFeatureAtPixel(e,function(i){n.push(i)},t),n},r.prototype.getAllLayers=function(){var e=[];function t(n){n.forEach(function(i){i instanceof Y?t(i.getLayers()):e.push(i)})}return t(this.getLayers()),e},r.prototype.forEachLayerAtPixel=function(e,t,n){if(!(!this.frameState_||!this.renderer_)){var i=n||{},a=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter||M;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,a,t,s)}},r.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_||!this.renderer_)return!1;var n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};var i=t.layerFilter!==void 0?t.layerFilter:M,a=t.hitTolerance!==void 0?t.hitTolerance:0,s=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,a,s,i,null)},r.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},r.prototype.getEventCoordinateInternal=function(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))},r.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),n="changedTouches"in e?e.changedTouches[0]:e;return[n.clientX-t.left,n.clientY-t.top]},r.prototype.getTarget=function(){return this.get(y.TARGET)},r.prototype.getTargetElement=function(){var e=this.getTarget();return e!==void 0?typeof e=="string"?document.getElementById(e):e:null},r.prototype.getCoordinateFromPixel=function(e){return rt(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())},r.prototype.getCoordinateFromPixelInternal=function(e){var t=this.frameState_;return t?Pe(t.pixelToCoordinateTransform,e.slice()):null},r.prototype.getControls=function(){return this.controls},r.prototype.getOverlays=function(){return this.overlays_},r.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null},r.prototype.getInteractions=function(){return this.interactions},r.prototype.getLayerGroup=function(){return this.get(y.LAYERGROUP)},r.prototype.setLayers=function(e){var t=this.getLayerGroup();if(e instanceof E){t.setLayers(e);return}var n=t.getLayers();n.clear(),n.extend(e)},r.prototype.getLayers=function(){var e=this.getLayerGroup().getLayers();return e},r.prototype.getLoadingOrNotReady=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,n=e.length;t<n;++t){var i=e[t];if(i.visible){var a=i.layer.getRenderer();if(a&&!a.ready)return!0;var s=i.layer.getSource();if(s&&s.loading)return!0}}return!1},r.prototype.getPixelFromCoordinate=function(e){var t=it(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)},r.prototype.getPixelFromCoordinateInternal=function(e){var t=this.frameState_;return t?Pe(t.coordinateToPixelTransform,e.slice(0,2)):null},r.prototype.getRenderer=function(){return this.renderer_},r.prototype.getSize=function(){return this.get(y.SIZE)},r.prototype.getView=function(){return this.get(y.VIEW)},r.prototype.getViewport=function(){return this.viewport_},r.prototype.getOverlayContainer=function(){return this.overlayContainer_},r.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},r.prototype.getOwnerDocument=function(){var e=this.getTargetElement();return e?e.ownerDocument:document},r.prototype.getTilePriority=function(e,t,n,i){return kt(this.frameState_,e,t,n,i)},r.prototype.handleBrowserEvent=function(e,t){var n=t||e.type,i=new P(n,this,e);this.handleMapBrowserEvent(i)},r.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){var t=e.originalEvent,n=t.type;if(n===se.POINTERDOWN||n===f.WHEEL||n===f.KEYDOWN){var i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,s=t.target;if(this.overlayContainerStopEvent_.contains(s)||!(a===i?i.documentElement:a).contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1)for(var u=this.getInteractions().getArray().slice(),l=u.length-1;l>=0;l--){var c=u[l];if(!(c.getMap()!==this||!c.getActive()||!this.getTargetElement())){var h=c.handleEvent(e);if(!h||e.propagationStopped)break}}}},r.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var n=this.maxTilesLoading_,i=n;if(e){var a=e.viewHints;if(a[z.ANIMATING]||a[z.INTERACTING]){var s=Date.now()-e.time>8;n=s?0:8,i=s?0:2}}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,i))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(K.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(K.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new I(T.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new I(T.LOADSTART,this,e))));for(var u=this.postRenderFunctions_,l=0,c=u.length;l<c;++l)u[l](this,e);u.length=0},r.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},r.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var e=0,t=this.targetChangeHandlerKeys_.length;e<t;++e)m(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(f.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(f.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,ae(this.viewport_)}var n=this.getTargetElement();if(!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Mt(this,this.moveTolerance_);for(var i in v)this.mapBrowserEventHandler_.addEventListener(v[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(f.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(f.WHEEL,this.boundHandleBrowserEvent_,Ke?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,s=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[_(s,f.KEYDOWN,this.handleBrowserEvent,this),_(s,f.KEYPRESS,this.handleBrowserEvent,this),_(a,f.RESIZE,this.updateSize,this)]}this.updateSize()},r.prototype.handleTileChange_=function(){this.render()},r.prototype.handleViewPropertyChanged_=function(){this.render()},r.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(m(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(m(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=_(e,W.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=_(e,f.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()},r.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(m),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.handleLayerAdd_(new x("addlayer",e)),this.layerGroupPropertyListenerKeys_=[_(e,W.PROPERTYCHANGE,this.render,this),_(e,f.CHANGE,this.render,this),_(e,"addlayer",this.handleLayerAdd_,this),_(e,"removelayer",this.handleLayerRemove_,this)]),this.render()},r.prototype.isRendered=function(){return!!this.frameState_},r.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},r.prototype.redrawText=function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,n=e.length;t<n;++t){var i=e[t].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},r.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},r.prototype.removeControl=function(e){return this.getControls().remove(e)},r.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},r.prototype.removeLayer=function(e){var t=this.getLayerGroup().getLayers();return t.remove(e)},r.prototype.handleLayerRemove_=function(e){je(e.layer)},r.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},r.prototype.renderFrame_=function(e){var t=this,n=this.getSize(),i=this.getView(),a=this.frameState_,s=null;if(n!==void 0&&xe(n)&&i&&i.isDef()){var u=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Ee(l.center,l.resolution,l.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:l,viewHints:u,wantedTiles:{},mapId:oe(this),renderTargets:{}},l.nextCenter&&l.nextResolution){var c=isNaN(l.nextRotation)?l.rotation:l.nextRotation;s.nextExtent=Ee(l.nextCenter,l.nextResolution,c,n)}}if(this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),a){var h=!this.previousExtent_||!ot(this.previousExtent_)&&!Ce(s.extent,this.previousExtent_);h&&(this.dispatchEvent(new I(T.MOVESTART,this,a)),this.previousExtent_=at(this.previousExtent_))}var d=this.previousExtent_&&!s.viewHints[z.ANIMATING]&&!s.viewHints[z.INTERACTING]&&!Ce(s.extent,this.previousExtent_);d&&(this.dispatchEvent(new I(T.MOVEEND,this,s)),st(s.extent,this.previousExtent_))}this.dispatchEvent(new I(T.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(T.LOADSTART)||this.hasListener(T.LOADEND)||this.hasListener(K.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){t.postRenderTimeoutHandle_=void 0,t.handlePostRender()},0))},r.prototype.setLayerGroup=function(e){var t=this.getLayerGroup();t&&this.handleLayerRemove_(new x("removelayer",t)),this.set(y.LAYERGROUP,e)},r.prototype.setSize=function(e){this.set(y.SIZE,e)},r.prototype.setTarget=function(e){this.set(y.TARGET,e)},r.prototype.setView=function(e){if(!e||e instanceof A){this.set(y.VIEW,e);return}this.set(y.VIEW,new A);var t=this;e.then(function(n){t.setView(new A(n))})},r.prototype.updateSize=function(){var e=this.getTargetElement(),t=void 0;if(e){var n=getComputedStyle(e),i=e.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),a=e.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(i)&&!isNaN(a)&&(t=[i,a],!xe(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(t),this.updateViewportSize_()},r.prototype.updateViewportSize_=function(){var e=this.getView();if(e){var t=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(t=[parseInt(n.width,10),parseInt(n.height,10)]),e.setViewportSize(t)}},r}(ce);function zt(o){var r=null;o.keyboardEventTarget!==void 0&&(r=typeof o.keyboardEventTarget=="string"?document.getElementById(o.keyboardEventTarget):o.keyboardEventTarget);var e={},t=o.layers&&typeof o.layers.getLayers=="function"?o.layers:new Y({layers:o.layers});e[y.LAYERGROUP]=t,e[y.TARGET]=o.target,e[y.VIEW]=o.view instanceof A?o.view:new A;var n;o.controls!==void 0&&(Array.isArray(o.controls)?n=new E(o.controls.slice()):(R(typeof o.controls.getArray=="function",47),n=o.controls));var i;o.interactions!==void 0&&(Array.isArray(o.interactions)?i=new E(o.interactions.slice()):(R(typeof o.interactions.getArray=="function",48),i=o.interactions));var a;return o.overlays!==void 0?Array.isArray(o.overlays)?a=new E(o.overlays.slice()):(R(typeof o.overlays.getArray=="function",49),a=o.overlays):a=new E,{controls:n,interactions:i,keyboardEventTarget:r,overlays:a,values:e}}const Zt=Ht;var Wt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),$t=function(o){Wt(r,o);function r(e){var t=o.call(this)||this,n=e.element;return n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),t.element=n||null,t.target_=null,t.map_=null,t.listenerKeys=[],e.render&&(t.render=e.render),e.target&&t.setTarget(e.target),t}return r.prototype.disposeInternal=function(){ae(this.element),o.prototype.disposeInternal.call(this)},r.prototype.getMap=function(){return this.map_},r.prototype.setMap=function(e){this.map_&&ae(this.element);for(var t=0,n=this.listenerKeys.length;t<n;++t)m(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,e){var i=this.target_?this.target_:e.getOverlayContainerStopEvent();i.appendChild(this.element),this.render!==Ie&&this.listenerKeys.push(_(e,T.POSTRENDER,this.render,this)),e.render()}},r.prototype.render=function(e){},r.prototype.setTarget=function(e){this.target_=typeof e=="string"?document.getElementById(e):e},r}(ce);const de=$t;var Ut=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Bt=function(o){Ut(r,o);function r(e){var t=this,n=e||{};t=o.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this,t.ulElement_=document.createElement("ul"),t.collapsed_=n.collapsed!==void 0?n.collapsed:!0,t.userCollapsed_=t.collapsed_,t.overrideCollapsible_=n.collapsible!==void 0,t.collapsible_=n.collapsible!==void 0?n.collapsible:!0,t.collapsible_||(t.collapsed_=!1);var i=n.className!==void 0?n.className:"ol-attribution",a=n.tipLabel!==void 0?n.tipLabel:"Attributions",s=n.expandClassName!==void 0?n.expandClassName:i+"-expand",u=n.collapseLabel!==void 0?n.collapseLabel:"›",l=n.collapseClassName!==void 0?n.collapseClassName:i+"-collapse";typeof u=="string"?(t.collapseLabel_=document.createElement("span"),t.collapseLabel_.textContent=u,t.collapseLabel_.className=l):t.collapseLabel_=u;var c=n.label!==void 0?n.label:"i";typeof c=="string"?(t.label_=document.createElement("span"),t.label_.textContent=c,t.label_.className=s):t.label_=c;var h=t.collapsible_&&!t.collapsed_?t.collapseLabel_:t.label_;t.toggleButton_=document.createElement("button"),t.toggleButton_.setAttribute("type","button"),t.toggleButton_.setAttribute("aria-expanded",String(!t.collapsed_)),t.toggleButton_.title=a,t.toggleButton_.appendChild(h),t.toggleButton_.addEventListener(f.CLICK,t.handleClick_.bind(t),!1);var d=i+" "+q+" "+he+(t.collapsed_&&t.collapsible_?" "+Te:"")+(t.collapsible_?"":" ol-uncollapsible"),p=t.element;return p.className=d,p.appendChild(t.toggleButton_),p.appendChild(t.ulElement_),t.renderedAttributions_=[],t.renderedVisible_=!0,t}return r.prototype.collectSourceAttributions_=function(e){for(var t={},n=[],i=!0,a=e.layerStatesArray,s=0,u=a.length;s<u;++s){var l=a[s];if($(l,e.viewState)){var c=l.layer.getSource();if(c){var h=c.getAttributions();if(h){var d=h(e);if(d)if(i=i&&c.getAttributionsCollapsible()!==!1,Array.isArray(d))for(var p=0,g=d.length;p<g;++p)d[p]in t||(n.push(d[p]),t[d[p]]=!0);else d in t||(n.push(d),t[d]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(i),n},r.prototype.updateElement_=function(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var t=this.collectSourceAttributions_(e),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Je(t,this.renderedAttributions_)){vt(this.ulElement_);for(var i=0,a=t.length;i<a;++i){var s=document.createElement("li");s.innerHTML=t[i],this.ulElement_.appendChild(s)}this.renderedAttributions_=t}},r.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},r.prototype.handleToggle_=function(){this.element.classList.toggle(Te),this.collapsed_?Oe(this.collapseLabel_,this.label_):Oe(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},r.prototype.getCollapsible=function(){return this.collapsible_},r.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},r.prototype.setCollapsed=function(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()},r.prototype.getCollapsed=function(){return this.collapsed_},r.prototype.render=function(e){this.updateElement_(e.frameState)},r}(de);const qt=Bt;var Yt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Xt=function(o){Yt(r,o);function r(e){var t=this,n=e||{};t=o.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this;var i=n.className!==void 0?n.className:"ol-rotate",a=n.label!==void 0?n.label:"⇧",s=n.compassClassName!==void 0?n.compassClassName:"ol-compass";t.label_=null,typeof a=="string"?(t.label_=document.createElement("span"),t.label_.className=s,t.label_.textContent=a):(t.label_=a,t.label_.classList.add(s));var u=n.tipLabel?n.tipLabel:"Reset rotation",l=document.createElement("button");l.className=i+"-reset",l.setAttribute("type","button"),l.title=u,l.appendChild(t.label_),l.addEventListener(f.CLICK,t.handleClick_.bind(t),!1);var c=i+" "+q+" "+he,h=t.element;return h.className=c,h.appendChild(l),t.callResetNorth_=n.resetNorth?n.resetNorth:void 0,t.duration_=n.duration!==void 0?n.duration:250,t.autoHide_=n.autoHide!==void 0?n.autoHide:!0,t.rotation_=void 0,t.autoHide_&&t.element.classList.add(G),t}return r.prototype.handleClick_=function(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},r.prototype.resetNorth_=function(){var e=this.getMap(),t=e.getView();if(t){var n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:b}):t.setRotation(0))}},r.prototype.render=function(e){var t=e.frameState;if(t){var n=t.viewState.rotation;if(n!=this.rotation_){var i="rotate("+n+"rad)";if(this.autoHide_){var a=this.element.classList.contains(G);!a&&n===0?this.element.classList.add(G):a&&n!==0&&this.element.classList.remove(G)}this.label_.style.transform=i}this.rotation_=n}},r}(de);const Qt=Xt;var Jt=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),en=function(o){Jt(r,o);function r(e){var t=this,n=e||{};t=o.call(this,{element:document.createElement("div"),target:n.target})||this;var i=n.className!==void 0?n.className:"ol-zoom",a=n.delta!==void 0?n.delta:1,s=n.zoomInClassName!==void 0?n.zoomInClassName:i+"-in",u=n.zoomOutClassName!==void 0?n.zoomOutClassName:i+"-out",l=n.zoomInLabel!==void 0?n.zoomInLabel:"+",c=n.zoomOutLabel!==void 0?n.zoomOutLabel:"–",h=n.zoomInTipLabel!==void 0?n.zoomInTipLabel:"Zoom in",d=n.zoomOutTipLabel!==void 0?n.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=s,p.setAttribute("type","button"),p.title=h,p.appendChild(typeof l=="string"?document.createTextNode(l):l),p.addEventListener(f.CLICK,t.handleClick_.bind(t,a),!1);var g=document.createElement("button");g.className=u,g.setAttribute("type","button"),g.title=d,g.appendChild(typeof c=="string"?document.createTextNode(c):c),g.addEventListener(f.CLICK,t.handleClick_.bind(t,-a),!1);var w=i+" "+q+" "+he,N=t.element;return N.className=w,N.appendChild(p),N.appendChild(g),t.duration_=n.duration!==void 0?n.duration:250,t}return r.prototype.handleClick_=function(e,t){t.preventDefault(),this.zoomByDelta_(e)},r.prototype.zoomByDelta_=function(e){var t=this.getMap(),n=t.getView();if(n){var i=n.getZoom();if(i!==void 0){var a=n.getConstrainedZoom(i+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:a,duration:this.duration_,easing:b})):n.setZoom(a)}}},r}(de);const tn=en;function nn(o){var r=o||{},e=new E,t=r.zoom!==void 0?r.zoom:!0;t&&e.push(new tn(r.zoomOptions));var n=r.rotate!==void 0?r.rotate:!0;n&&e.push(new Qt(r.rotateOptions));var i=r.attribution!==void 0?r.attribution:!0;return i&&e.push(new qt(r.attributionOptions)),e}const Le={ACTIVE:"active"};var rn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),on=function(o){rn(r,o);function r(e){var t=o.call(this)||this;return t.on,t.once,t.un,e&&e.handleEvent&&(t.handleEvent=e.handleEvent),t.map_=null,t.setActive(!0),t}return r.prototype.getActive=function(){return this.get(Le.ACTIVE)},r.prototype.getMap=function(){return this.map_},r.prototype.handleEvent=function(e){return!0},r.prototype.setActive=function(e){this.set(Le.ACTIVE,e)},r.prototype.setMap=function(e){this.map_=e},r}(ce);function an(o,r,e){var t=o.getCenterInternal();if(t){var n=[t[0]+r[0],t[1]+r[1]];o.animateInternal({duration:e!==void 0?e:250,easing:Et,center:o.getConstrainedCenter(n)})}}function fe(o,r,e,t){var n=o.getZoom();if(n!==void 0){var i=o.getConstrainedZoom(n+r),a=o.getResolutionForZoom(i);o.getAnimating()&&o.cancelAnimations(),o.animate({resolution:a,anchor:e,duration:t!==void 0?t:250,easing:b})}}const V=on;var sn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ln=function(o){sn(r,o);function r(e){var t=o.call(this)||this,n=e||{};return t.delta_=n.delta?n.delta:1,t.duration_=n.duration!==void 0?n.duration:250,t}return r.prototype.handleEvent=function(e){var t=!1;if(e.type==v.DBLCLICK){var n=e.originalEvent,i=e.map,a=e.coordinate,s=n.shiftKey?-this.delta_:this.delta_,u=i.getView();fe(u,s,a,this.duration_),n.preventDefault(),t=!0}return!t},r}(V);const un=ln;var cn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),hn=function(o){cn(r,o);function r(e){var t=this,n=e||{};return t=o.call(this,n)||this,n.handleDownEvent&&(t.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(t.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(t.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(t.handleUpEvent=n.handleUpEvent),n.stopDown&&(t.stopDown=n.stopDown),t.handlingDownUpSequence=!1,t.targetPointers=[],t}return r.prototype.getPointerCount=function(){return this.targetPointers.length},r.prototype.handleDownEvent=function(e){return!1},r.prototype.handleDragEvent=function(e){},r.prototype.handleEvent=function(e){if(!e.originalEvent)return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==v.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==v.POINTERUP){var n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==v.POINTERDOWN){var i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==v.POINTERMOVE&&this.handleMoveEvent(e);return!t},r.prototype.handleMoveEvent=function(e){},r.prototype.handleUpEvent=function(e){return!1},r.prototype.stopDown=function(e){return e},r.prototype.updateTrackedPointers_=function(e){e.activePointers&&(this.targetPointers=e.activePointers)},r}(V);function pe(o){for(var r=o.length,e=0,t=0,n=0;n<r;n++)e+=o[n].clientX,t+=o[n].clientY;return[e/r,t/r]}const F=hn;function le(o){var r=arguments;return function(e){for(var t=!0,n=0,i=r.length;n<i&&(t=t&&r[n](e),!!t);++n);return t}}var dn=function(o){var r=o.originalEvent;return r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey},fn=function(o){var r=o.map.getTargetElement(),e=o.map.getOwnerDocument().activeElement;return r.contains(e)},Ge=function(o){return o.map.getTargetElement().hasAttribute("tabindex")?fn(o):!0},pn=M,He=function(o){var r=o.originalEvent;return r.button==0&&!(yt&&gt&&r.ctrlKey)},ze=function(o){var r=o.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&!r.shiftKey},_n=function(o){var r=o.originalEvent;return!r.altKey&&!(r.metaKey||r.ctrlKey)&&r.shiftKey},Ze=function(o){var r=o.originalEvent,e=r.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!r.target.isContentEditable},ne=function(o){var r=o.originalEvent;return R(r!==void 0,56),r.pointerType=="mouse"},vn=function(o){var r=o.originalEvent;return R(r!==void 0,56),r.isPrimary&&r.button===0},yn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),gn=function(o){yn(r,o);function r(e){var t=o.call(this,{stopDown:B})||this,n=e||{};t.kinetic_=n.kinetic,t.lastCentroid=null,t.lastPointersCount_,t.panning_=!1;var i=n.condition?n.condition:le(ze,vn);return t.condition_=n.onFocusOnly?le(Ge,i):i,t.noKinetic_=!1,t}return r.prototype.handleDragEvent=function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var t=this.targetPointers,n=pe(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){var i=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],a=e.map,s=a.getView();lt(i,s.getResolution()),Ne(i,s.getRotation()),s.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=t.length,e.originalEvent.preventDefault()},r.prototype.handleUpEvent=function(e){var t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),s=n.getCenterInternal(),u=t.getPixelFromCoordinateInternal(s),l=t.getCoordinateFromPixelInternal([u[0]-i*Math.cos(a),u[1]-i*Math.sin(a)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:b})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},r.prototype.handleDownEvent=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var t=e.map,n=t.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},r}(F);const mn=gn;var En=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Cn=function(o){En(r,o);function r(e){var t=this,n=e||{};return t=o.call(this,{stopDown:B})||this,t.condition_=n.condition?n.condition:dn,t.lastAngle_=void 0,t.duration_=n.duration!==void 0?n.duration:250,t}return r.prototype.handleDragEvent=function(e){if(ne(e)){var t=e.map,n=t.getView();if(n.getConstraints().rotation!==Ve){var i=t.getSize(),a=e.pixel,s=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){var u=s-this.lastAngle_;n.adjustRotationInternal(-u)}this.lastAngle_=s}}},r.prototype.handleUpEvent=function(e){if(!ne(e))return!0;var t=e.map,n=t.getView();return n.endInteraction(this.duration_),!1},r.prototype.handleDownEvent=function(e){if(!ne(e))return!1;if(He(e)&&this.condition_(e)){var t=e.map;return t.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},r}(F),wn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Pn=function(o){wn(r,o);function r(e){var t=o.call(this)||this;return t.geometry_=null,t.element_=document.createElement("div"),t.element_.style.position="absolute",t.element_.style.pointerEvents="auto",t.element_.className="ol-box "+e,t.map_=null,t.startPixel_=null,t.endPixel_=null,t}return r.prototype.disposeInternal=function(){this.setMap(null)},r.prototype.render_=function(){var e=this.startPixel_,t=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(e[0],t[0])+n,i.top=Math.min(e[1],t[1])+n,i.width=Math.abs(t[0]-e[0])+n,i.height=Math.abs(t[1]-e[1])+n},r.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},r.prototype.setPixels=function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()},r.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]],i=n.map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Ct([i])},r.prototype.getGeometry=function(){return this.geometry_},r}(Ae);const Tn=Pn;var We=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Z={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},re=function(o){We(r,o);function r(e,t,n){var i=o.call(this,e)||this;return i.coordinate=t,i.mapBrowserEvent=n,i}return r}(ue),On=function(o){We(r,o);function r(e){var t=o.call(this)||this;t.on,t.once,t.un;var n=e||{};return t.box_=new Tn(n.className||"ol-dragbox"),t.minArea_=n.minArea!==void 0?n.minArea:64,n.onBoxEnd&&(t.onBoxEnd=n.onBoxEnd),t.startPixel_=null,t.condition_=n.condition?n.condition:He,t.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:t.defaultBoxEndCondition,t}return r.prototype.defaultBoxEndCondition=function(e,t,n){var i=n[0]-t[0],a=n[1]-t[1];return i*i+a*a>=this.minArea_},r.prototype.getGeometry=function(){return this.box_.getGeometry()},r.prototype.handleDragEvent=function(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new re(Z.BOXDRAG,e.coordinate,e))},r.prototype.handleUpEvent=function(e){this.box_.setMap(null);var t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new re(t?Z.BOXEND:Z.BOXCANCEL,e.coordinate,e)),!1},r.prototype.handleDownEvent=function(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new re(Z.BOXSTART,e.coordinate,e)),!0):!1},r.prototype.onBoxEnd=function(e){},r}(F);const xn=On;var Ln=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),An=function(o){Ln(r,o);function r(e){var t=this,n=e||{},i=n.condition?n.condition:_n;return t=o.call(this,{condition:i,className:n.className||"ol-dragzoom",minArea:n.minArea})||this,t.duration_=n.duration!==void 0?n.duration:200,t.out_=n.out!==void 0?n.out:!1,t}return r.prototype.onBoxEnd=function(e){var t=this.getMap(),n=t.getView(),i=this.getGeometry();if(this.out_){var a=n.rotatedExtentForGeometry(i),s=n.getResolutionForExtentInternal(a),u=n.getResolution()/s;i=i.clone(),i.scale(u*u)}n.fitInternal(i,{duration:this.duration_,easing:b})},r}(xn);const Rn=An,L={LEFT:37,UP:38,RIGHT:39,DOWN:40};var Dn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),In=function(o){Dn(r,o);function r(e){var t=o.call(this)||this,n=e||{};return t.defaultCondition_=function(i){return ze(i)&&Ze(i)},t.condition_=n.condition!==void 0?n.condition:t.defaultCondition_,t.duration_=n.duration!==void 0?n.duration:100,t.pixelDelta_=n.pixelDelta!==void 0?n.pixelDelta:128,t}return r.prototype.handleEvent=function(e){var t=!1;if(e.type==f.KEYDOWN){var n=e.originalEvent,i=n.keyCode;if(this.condition_(e)&&(i==L.DOWN||i==L.LEFT||i==L.RIGHT||i==L.UP)){var a=e.map,s=a.getView(),u=s.getResolution()*this.pixelDelta_,l=0,c=0;i==L.DOWN?c=-u:i==L.LEFT?l=-u:i==L.RIGHT?l=u:c=u;var h=[l,c];Ne(h,s.getRotation()),an(s,h,this.duration_),n.preventDefault(),t=!0}}return!t},r}(V),Nn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Sn=function(o){Nn(r,o);function r(e){var t=o.call(this)||this,n=e||{};return t.condition_=n.condition?n.condition:Ze,t.delta_=n.delta?n.delta:1,t.duration_=n.duration!==void 0?n.duration:100,t}return r.prototype.handleEvent=function(e){var t=!1;if(e.type==f.KEYDOWN||e.type==f.KEYPRESS){var n=e.originalEvent,i=n.charCode;if(this.condition_(e)&&(i==43||i==45)){var a=e.map,s=i==43?this.delta_:-this.delta_,u=a.getView();fe(u,s,void 0,this.duration_),n.preventDefault(),t=!0}}return!t},r}(V);const Mn=Sn;var Kn=function(){function o(r,e,t){this.decay_=r,this.minVelocity_=e,this.delay_=t,this.points_=[],this.angle_=0,this.initialVelocity_=0}return o.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},o.prototype.update=function(r,e){this.points_.push(r,e,Date.now())},o.prototype.end=function(){if(this.points_.length<6)return!1;var r=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<r)return!1;for(var t=e-3;t>0&&this.points_[t+2]>r;)t-=3;var n=this.points_[e+2]-this.points_[t+2];if(n<1e3/60)return!1;var i=this.points_[e]-this.points_[t],a=this.points_[e+1]-this.points_[t+1];return this.angle_=Math.atan2(a,i),this.initialVelocity_=Math.sqrt(i*i+a*a)/n,this.initialVelocity_>this.minVelocity_},o.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},o.prototype.getAngle=function(){return this.angle_},o}(),bn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ie={TRACKPAD:"trackpad",WHEEL:"wheel"},Vn=function(o){bn(r,o);function r(e){var t=this,n=e||{};t=o.call(this,n)||this,t.totalDelta_=0,t.lastDelta_=0,t.maxDelta_=n.maxDelta!==void 0?n.maxDelta:1,t.duration_=n.duration!==void 0?n.duration:250,t.timeout_=n.timeout!==void 0?n.timeout:80,t.useAnchor_=n.useAnchor!==void 0?n.useAnchor:!0,t.constrainResolution_=n.constrainResolution!==void 0?n.constrainResolution:!1;var i=n.condition?n.condition:pn;return t.condition_=n.onFocusOnly?le(Ge,i):i,t.lastAnchor_=null,t.startTime_=void 0,t.timeoutId_,t.mode_=void 0,t.trackpadEventGap_=400,t.trackpadTimeoutId_,t.deltaPerZoom_=300,t}return r.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var e=this.getMap();if(e){var t=e.getView();t.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},r.prototype.handleEvent=function(e){if(!this.condition_(e))return!0;var t=e.type;if(t!==f.WHEEL)return!0;var n=e.map,i=e.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);var a;if(e.type==f.WHEEL&&(a=i.deltaY,mt&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=be),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?ie.TRACKPAD:ie.WHEEL);var u=n.getView();if(this.mode_===ie.TRACKPAD&&!(u.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(u.getAnimating()&&u.cancelAnimations(),u.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),u.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=a;var l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1},r.prototype.handleWheelZoom_=function(e){var t=e.getView();t.getAnimating()&&t.cancelAnimations();var n=-ut(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),fe(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},r.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},r}(V);const Fn=Vn;var jn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),kn=function(o){jn(r,o);function r(e){var t=this,n=e||{},i=n;return i.stopDown||(i.stopDown=B),t=o.call(this,i)||this,t.anchor_=null,t.lastAngle_=void 0,t.rotating_=!1,t.rotationDelta_=0,t.threshold_=n.threshold!==void 0?n.threshold:.3,t.duration_=n.duration!==void 0?n.duration:250,t}return r.prototype.handleDragEvent=function(e){var t=0,n=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(this.lastAngle_!==void 0){var s=a-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=s}this.lastAngle_=a;var u=e.map,l=u.getView();if(l.getConstraints().rotation!==Ve){var c=u.getViewport().getBoundingClientRect(),h=pe(this.targetPointers);h[0]-=c.left,h[1]-=c.top,this.anchor_=u.getCoordinateFromPixelInternal(h),this.rotating_&&(u.render(),l.adjustRotationInternal(t,this.anchor_))}},r.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var t=e.map,n=t.getView();return n.endInteraction(this.duration_),!1}else return!0},r.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}else return!1},r}(F),Gn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),Hn=function(o){Gn(r,o);function r(e){var t=this,n=e||{},i=n;return i.stopDown||(i.stopDown=B),t=o.call(this,i)||this,t.anchor_=null,t.duration_=n.duration!==void 0?n.duration:400,t.lastDistance_=void 0,t.lastScaleDelta_=1,t}return r.prototype.handleDragEvent=function(e){var t=1,n=this.targetPointers[0],i=this.targetPointers[1],a=n.clientX-i.clientX,s=n.clientY-i.clientY,u=Math.sqrt(a*a+s*s);this.lastDistance_!==void 0&&(t=this.lastDistance_/u),this.lastDistance_=u;var l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t);var h=l.getViewport().getBoundingClientRect(),d=pe(this.targetPointers);d[0]-=h.left,d[1]-=h.top,this.anchor_=l.getCoordinateFromPixelInternal(d),l.render(),c.adjustResolutionInternal(t,this.anchor_)},r.prototype.handleUpEvent=function(e){if(this.targetPointers.length<2){var t=e.map,n=t.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}else return!0},r.prototype.handleDownEvent=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}else return!1},r}(F);const zn=Hn;function Zn(o){var r=o||{},e=new E,t=new Kn(-.005,.05,100),n=r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0;n&&e.push(new Cn);var i=r.doubleClickZoom!==void 0?r.doubleClickZoom:!0;i&&e.push(new un({delta:r.zoomDelta,duration:r.zoomDuration}));var a=r.dragPan!==void 0?r.dragPan:!0;a&&e.push(new mn({onFocusOnly:r.onFocusOnly,kinetic:t}));var s=r.pinchRotate!==void 0?r.pinchRotate:!0;s&&e.push(new kn);var u=r.pinchZoom!==void 0?r.pinchZoom:!0;u&&e.push(new zn({duration:r.zoomDuration}));var l=r.keyboard!==void 0?r.keyboard:!0;l&&(e.push(new In),e.push(new Mn({delta:r.zoomDelta,duration:r.zoomDuration})));var c=r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0;c&&e.push(new Fn({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration}));var h=r.shiftDragZoom!==void 0?r.shiftDragZoom:!0;return h&&e.push(new Rn({duration:r.zoomDuration})),e}var Wn=function(){var o=function(r,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},o(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");o(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),cr=function(o){Wn(r,o);function r(e){return e=Re({},e),e.controls||(e.controls=nn()),e.interactions||(e.interactions=Zn({onFocusOnly:!0})),o.call(this,e)||this}return r.prototype.createRenderer=function(){return new At(this)},r}(Zt);export{cr as default};
