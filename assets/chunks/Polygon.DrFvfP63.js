import{i as B,d as H,G as C,S as O,a as J,q as K}from"./inflate.CR1fXO-E.js";import{C as _,D as Q,E as w,F as V,G as W,y as Z}from"./proj.BNE8J585.js";import{n as S,h as k}from"./Object.DdgBWT7D.js";import{l as N,i as q}from"./intersectsextent.DO7gmjzY.js";function A(o,r,t,n,e,i,s){var a=o[r],l=o[r+1],h=o[t]-a,g=o[t+1]-l,u;if(h===0&&g===0)u=r;else{var v=((e-a)*h+(i-l)*g)/(h*h+g*g);if(v>1)u=t;else if(v>0){for(var f=0;f<n;++f)s[f]=Q(o[r+f],o[t+f],v);s.length=n;return}else u=r}for(var f=0;f<n;++f)s[f]=o[u+f];s.length=n}function I(o,r,t,n,e){var i=o[r],s=o[r+1];for(r+=n;r<t;r+=n){var a=o[r],l=o[r+1],h=_(i,s,a,l);h>e&&(e=h),i=a,s=l}return e}function L(o,r,t,n,e){for(var i=0,s=t.length;i<s;++i){var a=t[i];e=I(o,r,a,n,e),r=a}return e}function vt(o,r,t,n,e){for(var i=0,s=t.length;i<s;++i){var a=t[i];e=L(o,r,a,n,e),r=a[a.length-1]}return e}function E(o,r,t,n,e,i,s,a,l,h,g){if(r==t)return h;var u,v;if(e===0)if(v=_(s,a,o[r],o[r+1]),v<h){for(u=0;u<n;++u)l[u]=o[r+u];return l.length=n,v}else return h;for(var f=g||[NaN,NaN],c=r+n;c<t;)if(A(o,c-n,c,n,s,a,f),v=_(s,a,f[0],f[1]),v<h){for(h=v,u=0;u<n;++u)l[u]=f[u];l.length=n,c+=n}else c+=n*Math.max((Math.sqrt(v)-Math.sqrt(h))/e|0,1);if(i&&(A(o,t-n,r,n,s,a,f),v=_(s,a,f[0],f[1]),v<h)){for(h=v,u=0;u<n;++u)l[u]=f[u];l.length=n}return h}function X(o,r,t,n,e,i,s,a,l,h,g){for(var u=g||[NaN,NaN],v=0,f=t.length;v<f;++v){var c=t[v];h=E(o,r,c,n,e,i,s,a,l,h,u),r=c}return h}function ft(o,r,t,n,e,i,s,a,l,h,g){for(var u=g||[NaN,NaN],v=0,f=t.length;v<f;++v){var c=t[v];h=X(o,r,c,n,e,i,s,a,l,h,u),r=c[c.length-1]}return h}function b(o,r,t,n){for(var e=0,i=t.length;e<i;++e)o[r++]=t[e];return r}function M(o,r,t,n){for(var e=0,i=t.length;e<i;++e)for(var s=t[e],a=0;a<n;++a)o[r++]=s[a];return r}function Y(o,r,t,n,e){for(var i=e||[],s=0,a=0,l=t.length;a<l;++a){var h=M(o,r,t[a],n);i[s++]=h,r=h}return i.length=s,i}function gt(o,r,t,n,e){for(var i=e||[],s=0,a=0,l=t.length;a<l;++a){var h=Y(o,r,t[a],n,i[s]);i[s++]=h,r=h[h.length-1]}return i.length=s,i}function $(o,r,t,n){for(var e=0,i=o[t-n],s=o[t-n+1];r<t;r+=n){var a=o[r],l=o[r+1];e+=s*a-i*l,i=a,s=l}return e/2}function G(o,r,t,n){for(var e=0,i=0,s=t.length;i<s;++i){var a=t[i];e+=$(o,r,a,n),r=a}return e}function ct(o,r,t,n){for(var e=0,i=0,s=t.length;i<s;++i){var a=t[i];e+=G(o,r,a,n),r=a[a.length-1]}return e}var tt=function(){var o=function(r,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])},o(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),rt=function(o){tt(r,o);function r(t,n){var e=o.call(this)||this;return e.maxDelta_=-1,e.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(t[0])?e.setFlatCoordinates(n,t):e.setCoordinates(t,n),e}return r.prototype.clone=function(){return new r(this.flatCoordinates.slice(),this.layout)},r.prototype.closestPointXY=function(t,n,e,i){return i<w(this.getExtent(),t,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(I(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),E(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,n,e,i))},r.prototype.getArea=function(){return $(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getCoordinates=function(){return B(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},r.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=H(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new r(n,C.XY)},r.prototype.getType=function(){return"LinearRing"},r.prototype.intersectsExtent=function(t){return!1},r.prototype.setCoordinates=function(t,n){this.setLayout(n,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=M(this.flatCoordinates,0,t,this.stride),this.changed()},r}(O);const m=rt;var nt=function(){var o=function(r,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])},o(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),et=function(o){nt(r,o);function r(t,n){var e=o.call(this)||this;return e.setCoordinates(t,n),e}return r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,n,e,i){var s=this.flatCoordinates,a=_(t,n,s[0],s[1]);if(a<i){for(var l=this.stride,h=0;h<l;++h)e[h]=s[h];return e.length=l,a}else return i},r.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},r.prototype.computeExtent=function(t){return V(this.flatCoordinates,t)},r.prototype.getType=function(){return"Point"},r.prototype.intersectsExtent=function(t){return W(t,this.flatCoordinates[0],this.flatCoordinates[1])},r.prototype.setCoordinates=function(t,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=b(this.flatCoordinates,0,t,this.stride),this.changed()},r}(O);const it=et;function T(o,r,t,n,e,i,s){for(var a,l,h,g,u,v,f,c=e[i+1],p=[],R=0,U=t.length;R<U;++R){var x=t[R];for(g=o[x-n],v=o[x-n+1],a=r;a<x;a+=n)u=o[a],f=o[a+1],(c<=v&&f<=c||v<=c&&c<=f)&&(h=(c-v)/(f-v)*(u-g)+g,p.push(h)),g=u,v=f}var y=NaN,d=-1/0;for(p.sort(S),g=p[0],a=1,l=p.length;a<l;++a){u=p[a];var F=Math.abs(u-g);F>d&&(h=(g+u)/2,N(o,r,t,n,h,c)&&(y=h,d=F)),g=u}return isNaN(y)&&(y=e[i]),s?(s.push(y,c,d),s):[y,c,d]}function pt(o,r,t,n,e){for(var i=[],s=0,a=t.length;s<a;++s){var l=t[s];i=T(o,r,l,n,e,2*s,i),r=l[l.length-1]}return i}function ot(o,r,t,n){for(;r<t-n;){for(var e=0;e<n;++e){var i=o[r+e];o[r+e]=o[t-n+e],o[t-n+e]=i}r+=n,t-=n}}function j(o,r,t,n){for(var e=0,i=o[t-n],s=o[t-n+1];r<t;r+=n){var a=o[r],l=o[r+1];e+=(a-i)*(l+s),i=a,s=l}return e===0?void 0:e>0}function z(o,r,t,n,e){for(var i=e!==void 0?e:!1,s=0,a=t.length;s<a;++s){var l=t[s],h=j(o,r,l,n);if(s===0){if(i&&h||!i&&!h)return!1}else if(i&&!h||!i&&h)return!1;r=l}return!0}function yt(o,r,t,n,e){for(var i=0,s=t.length;i<s;++i){var a=t[i];if(!z(o,r,a,n,e))return!1;a.length&&(r=a[a.length-1])}return!0}function P(o,r,t,n,e){for(var i=e!==void 0?e:!1,s=0,a=t.length;s<a;++s){var l=t[s],h=j(o,r,l,n),g=s===0?i&&h||!i&&!h:i&&!h||!i&&h;g&&ot(o,r,l,n),r=l}return r}function _t(o,r,t,n,e){for(var i=0,s=t.length;i<s;++i)r=P(o,r,t[i],n,e);return r}var at=function(){var o=function(r,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])},o(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),D=function(o){at(r,o);function r(t,n,e){var i=o.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,n!==void 0&&e?(i.setFlatCoordinates(n,t),i.ends_=e):i.setCoordinates(t,n),i}return r.prototype.appendLinearRing=function(t){this.flatCoordinates?k(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},r.prototype.clone=function(){var t=new r(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},r.prototype.closestPointXY=function(t,n,e,i){return i<w(this.getExtent(),t,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(L(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),X(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,n,e,i))},r.prototype.containsXY=function(t,n){return N(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,n)},r.prototype.getArea=function(){return G(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},r.prototype.getCoordinates=function(t){var n;return t!==void 0?(n=this.getOrientedFlatCoordinates().slice(),P(n,0,this.ends_,this.stride,t)):n=this.flatCoordinates,J(n,0,this.ends_,this.stride)},r.prototype.getEnds=function(){return this.ends_},r.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Z(this.getExtent());this.flatInteriorPoint_=T(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},r.prototype.getInteriorPoint=function(){return new it(this.getFlatInteriorPoint(),C.XYM)},r.prototype.getLinearRingCount=function(){return this.ends_.length},r.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new m(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},r.prototype.getLinearRings=function(){for(var t=this.layout,n=this.flatCoordinates,e=this.ends_,i=[],s=0,a=0,l=e.length;a<l;++a){var h=e[a],g=new m(n.slice(s,h),t);i.push(g),s=h}return i},r.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;z(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=P(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},r.prototype.getSimplifiedGeometryInternal=function(t){var n=[],e=[];return n.length=K(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,e),new r(n,C.XY,e)},r.prototype.getType=function(){return"Polygon"},r.prototype.intersectsExtent=function(t){return q(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},r.prototype.setCoordinates=function(t,n){this.setLayout(n,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var e=Y(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=e.length===0?0:e[e.length-1],this.changed()},r}(O);const dt=D;function Ct(o){var r=o[0],t=o[1],n=o[2],e=o[3],i=[r,t,r,e,n,e,n,t,r,t];return new D(i,C.XY,[i.length])}export{dt as P,E as a,L as b,X as c,M as d,Y as e,Ct as f,it as g,vt as h,ft as i,pt as j,yt as k,ct as l,I as m,gt as n,_t as o};
