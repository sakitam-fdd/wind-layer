import{b as f,l as c,a as p}from"./proj.BNE8J585.js";import{a as h,d as g,u as l,l as y,E as _,B as O}from"./Object.DdgBWT7D.js";var v=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,E=/^([a-z]*)$|^hsla?\(.*\)$/i;function b(n){return typeof n=="string"?n:M(n)}function R(n){var t=document.createElement("div");if(t.style.color=n,t.style.color!==""){document.body.appendChild(t);var e=getComputedStyle(t).color;return document.body.removeChild(t),e}else return""}var I=function(){var n=1024,t={},e=0;return function(r){var o;if(t.hasOwnProperty(r))o=t[r];else{if(e>=n){var s=0;for(var a in t)s++&3||(delete t[a],--e)}o=S(r),t[r]=o,++e}return o}}();function X(n){return Array.isArray(n)?n:I(n)}function S(n){var t,e,r,o,s;if(E.exec(n)&&(n=R(n)),v.exec(n)){var a=n.length-1,u=void 0;a<=4?u=1:u=2;var d=a===4||a===8;t=parseInt(n.substr(1+0*u,u),16),e=parseInt(n.substr(1+1*u,u),16),r=parseInt(n.substr(1+2*u,u),16),d?o=parseInt(n.substr(1+3*u,u),16):o=255,u==1&&(t=(t<<4)+t,e=(e<<4)+e,r=(r<<4)+r,d&&(o=(o<<4)+o)),s=[t,e,r,o/255]}else n.indexOf("rgba(")==0?(s=n.slice(5,-1).split(",").map(Number),m(s)):n.indexOf("rgb(")==0?(s=n.slice(4,-1).split(",").map(Number),s.push(1),m(s)):f(!1,14);return s}function m(n){return n[0]=c(n[0]+.5|0,0,255),n[1]=c(n[1]+.5|0,0,255),n[2]=c(n[2]+.5|0,0,255),n[3]=c(n[3],0,1),n}function M(n){var t=n[0];t!=(t|0)&&(t=t+.5|0);var e=n[1];e!=(e|0)&&(e=e+.5|0);var r=n[2];r!=(r|0)&&(r=r+.5|0);var o=n[3]===void 0?1:Math.round(n[3]*100)/100;return"rgba("+t+","+e+","+r+","+o+")"}const i={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var x=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),N=function(n){x(t,n);function t(e){var r=n.call(this)||this;r.on,r.once,r.un,r.background_=e.background;var o=h({},e);return typeof e.properties=="object"&&(delete o.properties,h(o,e.properties)),o[i.OPACITY]=e.opacity!==void 0?e.opacity:1,f(typeof o[i.OPACITY]=="number",64),o[i.VISIBLE]=e.visible!==void 0?e.visible:!0,o[i.Z_INDEX]=e.zIndex,o[i.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,o[i.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,o[i.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,o[i.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,r.className_=o.className!==void 0?o.className:"ol-layer",delete o.className,r.setProperties(o),r.state_=null,r}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(e){var r=this.state_||{layer:this,managed:e===void 0?!0:e},o=this.getZIndex();return r.opacity=c(Math.round(this.getOpacity()*100)/100,0,1),r.visible=this.getVisible(),r.extent=this.getExtent(),r.zIndex=o===void 0&&!r.managed?1/0:o,r.maxResolution=this.getMaxResolution(),r.minResolution=Math.max(this.getMinResolution(),0),r.minZoom=this.getMinZoom(),r.maxZoom=this.getMaxZoom(),this.state_=r,r},t.prototype.getLayersArray=function(e){return p()},t.prototype.getLayerStatesArray=function(e){return p()},t.prototype.getExtent=function(){return this.get(i.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(i.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(i.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(i.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(i.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(i.OPACITY)},t.prototype.getSourceState=function(){return p()},t.prototype.getVisible=function(){return this.get(i.VISIBLE)},t.prototype.getZIndex=function(){return this.get(i.Z_INDEX)},t.prototype.setBackground=function(e){this.background_=e,this.changed()},t.prototype.setExtent=function(e){this.set(i.EXTENT,e)},t.prototype.setMaxResolution=function(e){this.set(i.MAX_RESOLUTION,e)},t.prototype.setMinResolution=function(e){this.set(i.MIN_RESOLUTION,e)},t.prototype.setMaxZoom=function(e){this.set(i.MAX_ZOOM,e)},t.prototype.setMinZoom=function(e){this.set(i.MIN_ZOOM,e)},t.prototype.setOpacity=function(e){f(typeof e=="number",64),this.set(i.OPACITY,e)},t.prototype.setVisible=function(e){this.set(i.VISIBLE,e)},t.prototype.setZIndex=function(e){this.set(i.Z_INDEX,e)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),n.prototype.disposeInternal.call(this)},t}(g);const C=N,P={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var A=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),K=function(n){A(t,n);function t(e){var r=this,o=h({},e);delete o.source,r=n.call(this,o)||this,r.on,r.once,r.un,r.mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,r.rendered=!1,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addChangeListener(i.SOURCE,r.handleSourcePropertyChange_);var s=e.source?e.source:null;return r.setSource(s),r}return t.prototype.getLayersArray=function(e){var r=e||[];return r.push(this),r},t.prototype.getLayerStatesArray=function(e){var r=e||[];return r.push(this.getLayerState()),r},t.prototype.getSource=function(){return this.get(i.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(l(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=y(e,_.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(e){return this.renderer_?this.renderer_.getFeatures(e):new Promise(function(r){return r([])})},t.prototype.getData=function(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)},t.prototype.render=function(e,r){var o=this.getRenderer();if(o.prepareFrame(e))return this.rendered=!0,o.renderFrame(e,r)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(e){e||this.unrender(),this.set(i.MAP,e)},t.prototype.getMapInternal=function(){return this.get(i.MAP)},t.prototype.setMap=function(e){this.mapPrecomposeKey_&&(l(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(l(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=y(e,P.PRECOMPOSE,function(r){var o=r,s=o.frameState.layerStatesArray,a=this.getLayerState(!1);f(!s.some(function(u){return u.layer===a.layer}),67),s.push(a)},this),this.mapRenderKey_=y(this,_.CHANGE,e.render,e),this.changed())},t.prototype.setSource=function(e){this.set(i.SOURCE,e)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),n.prototype.disposeInternal.call(this)},t}(C);function w(n,t){if(!n.visible)return!1;var e=t.resolution;if(e<n.minResolution||e>=n.maxResolution)return!1;var r=t.zoom;return r>n.minZoom&&r<=n.maxZoom}var Z=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(r[s]=o[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),B=function(n){Z(t,n);function t(e,r,o,s){var a=n.call(this,e)||this;return a.inversePixelTransform=r,a.frameState=o,a.context=s,a}return t}(O);export{C as B,K as L,B as R,P as a,b,X as c,w as i,M as t};
