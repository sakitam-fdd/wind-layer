import{m as L,d as A}from"./Object.DdgBWT7D.js";import{U as I}from"./Projection.Bg0YEavu.js";import{H as N,a as f,j as Z,I as q,J as U,m as M,K as Y,L as F,y as z,M as C}from"./proj.BNE8J585.js";import{c as $,a as H}from"./transform.CU9krZJA.js";const G={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function E(a,r,t,n,e,i){for(var o=i||[],u=0,c=r;c<t;c+=n){var h=a[c],v=a[c+1];o[u++]=e[0]*h+e[2]*v+e[4],o[u++]=e[1]*h+e[3]*v+e[5]}return i&&o.length!=u&&(o.length=u),o}function B(a,r,t,n,e,i,o){for(var u=o||[],c=Math.cos(e),h=Math.sin(e),v=i[0],p=i[1],s=0,y=r;y<t;y+=n){var g=a[y]-v,l=a[y+1]-p;u[s++]=v+g*c-l*h,u[s++]=p+g*h+l*c;for(var S=y+2;S<y+n;++S)u[s++]=a[S]}return o&&u.length!=s&&(u.length=s),u}function D(a,r,t,n,e,i,o,u){for(var c=u||[],h=o[0],v=o[1],p=0,s=r;s<t;s+=n){var y=a[s]-h,g=a[s+1]-v;c[p++]=h+e*y,c[p++]=v+i*g;for(var l=s+2;l<s+n;++l)c[p++]=a[l]}return u&&c.length!=p&&(c.length=p),c}function J(a,r,t,n,e,i,o){for(var u=o||[],c=0,h=r;h<t;h+=n){u[c++]=a[h]+e,u[c++]=a[h+1]+i;for(var v=h+2;v<h+n;++v)u[c++]=a[v]}return o&&u.length!=c&&(u.length=c),u}var K=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),x=H(),W=function(a){K(r,a);function r(){var t=a.call(this)||this;return t.extent_=N(),t.extentRevision_=-1,t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t.simplifyTransformedInternal=L(function(n,e,i){if(!i)return this.getSimplifiedGeometry(e);var o=this.clone();return o.applyTransform(i),o.getSimplifiedGeometry(e)}),t}return r.prototype.simplifyTransformed=function(t,n){return this.simplifyTransformedInternal(this.getRevision(),t,n)},r.prototype.clone=function(){return f()},r.prototype.closestPointXY=function(t,n,e,i){return f()},r.prototype.containsXY=function(t,n){var e=this.getClosestPoint([t,n]);return e[0]===t&&e[1]===n},r.prototype.getClosestPoint=function(t,n){var e=n||[NaN,NaN];return this.closestPointXY(t[0],t[1],e,1/0),e},r.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},r.prototype.computeExtent=function(t){return f()},r.prototype.getExtent=function(t){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&Z(n),this.extentRevision_=this.getRevision()}return q(this.extent_,t)},r.prototype.rotate=function(t,n){f()},r.prototype.scale=function(t,n,e){f()},r.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},r.prototype.getSimplifiedGeometry=function(t){return f()},r.prototype.getType=function(){return f()},r.prototype.applyTransform=function(t){f()},r.prototype.intersectsExtent=function(t){return f()},r.prototype.translate=function(t,n){f()},r.prototype.transform=function(t,n){var e=U(t),i=e.getUnits()==I.TILE_PIXELS?function(o,u,c){var h=e.getExtent(),v=e.getWorldExtent(),p=M(v)/M(h);return $(x,v[0],v[3],p,-p,0,0,0),E(o,0,o.length,c,x,u),Y(e,n)(o,u,c)}:Y(e,n);return this.applyTransform(i),this},r}(A);const Q=W;var V=function(){var a=function(r,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])},a(r,t)};return function(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");a(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),k=function(a){V(r,a);function r(){var t=a.call(this)||this;return t.layout=G.XY,t.stride=2,t.flatCoordinates=null,t}return r.prototype.computeExtent=function(t){return F(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},r.prototype.getCoordinates=function(){return f()},r.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},r.prototype.getFlatCoordinates=function(){return this.flatCoordinates},r.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},r.prototype.getLayout=function(){return this.layout},r.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(t),e=n.getFlatCoordinates();return e.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},r.prototype.getSimplifiedGeometryInternal=function(t){return this},r.prototype.getStride=function(){return this.stride},r.prototype.setFlatCoordinates=function(t,n){this.stride=T(t),this.layout=t,this.flatCoordinates=n},r.prototype.setCoordinates=function(t,n){f()},r.prototype.setLayout=function(t,n,e){var i;if(t)i=T(t);else{for(var o=0;o<e;++o)if(n.length===0){this.layout=G.XY,this.stride=2;return}else n=n[0];i=n.length,t=b(i)}this.layout=t,this.stride=i},r.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},r.prototype.rotate=function(t,n){var e=this.getFlatCoordinates();if(e){var i=this.getStride();B(e,0,e.length,i,t,n,e),this.changed()}},r.prototype.scale=function(t,n,e){var i=n;i===void 0&&(i=t);var o=e;o||(o=z(this.getExtent()));var u=this.getFlatCoordinates();if(u){var c=this.getStride();D(u,0,u.length,c,t,i,o,u),this.changed()}},r.prototype.translate=function(t,n){var e=this.getFlatCoordinates();if(e){var i=this.getStride();J(e,0,e.length,i,t,n,e),this.changed()}},r}(Q);function b(a){var r;return a==2?r=G.XY:a==3?r=G.XYZ:a==4&&(r=G.XYZM),r}function T(a){var r;return a==G.XY?r=2:a==G.XYZ||a==G.XYM?r=3:a==G.XYZM&&(r=4),r}function it(a,r,t){var n=a.getFlatCoordinates();if(n){var e=a.getStride();return E(n,0,n.length,e,r,t)}else return null}const ut=k;function O(a,r,t,n,e,i,o){var u=(t-r)/n;if(u<3){for(;r<t;r+=n)i[o++]=a[r],i[o++]=a[r+1];return o}var c=new Array(u);c[0]=1,c[u-1]=1;for(var h=[r,t-n],v=0;h.length>0;){for(var p=h.pop(),s=h.pop(),y=0,g=a[s],l=a[s+1],S=a[p],P=a[p+1],m=s+n;m<p;m+=n){var w=a[m],R=a[m+1],_=C(w,R,g,l,S,P);_>y&&(v=m,y=_)}y>e&&(c[(v-r)/n]=1,s+n<v&&h.push(s,v),v+n<p&&h.push(v,p))}for(var m=0;m<u;++m)c[m]&&(i[o++]=a[r+m*n],i[o++]=a[r+m*n+1]);return o}function ct(a,r,t,n,e,i,o,u){for(var c=0,h=t.length;c<h;++c){var v=t[c];o=O(a,r,v,n,e,i,o),u.push(o),r=v}return o}function X(a,r){return r*Math.round(a/r)}function j(a,r,t,n,e,i,o){if(r==t)return o;var u=X(a[r],e),c=X(a[r+1],e);r+=n,i[o++]=u,i[o++]=c;var h,v;do if(h=X(a[r],e),v=X(a[r+1],e),r+=n,r==t)return i[o++]=h,i[o++]=v,o;while(h==u&&v==c);for(;r<t;){var p=X(a[r],e),s=X(a[r+1],e);if(r+=n,!(p==h&&s==v)){var y=h-u,g=v-c,l=p-u,S=s-c;if(y*S==g*l&&(y<0&&l<y||y==l||y>0&&l>y)&&(g<0&&S<g||g==S||g>0&&S>g)){h=p,v=s;continue}i[o++]=h,i[o++]=v,u=h,c=v,h=p,v=s}}return i[o++]=h,i[o++]=v,o}function d(a,r,t,n,e,i,o,u){for(var c=0,h=t.length;c<h;++c){var v=t[c];o=j(a,r,v,n,e,i,o),u.push(o),r=v}return o}function ht(a,r,t,n,e,i,o,u){for(var c=0,h=t.length;c<h;++c){var v=t[c],p=[];o=d(a,r,v,n,e,i,o,p),u.push(p),r=v[v.length-1]}return o}function tt(a,r,t,n,e){for(var i=e!==void 0?e:[],o=0,u=r;u<t;u+=n)i[o++]=a.slice(u,u+n);return i.length=o,i}function rt(a,r,t,n,e){for(var i=e!==void 0?e:[],o=0,u=0,c=t.length;u<c;++u){var h=t[u];i[o++]=tt(a,r,h,n,i[o]),r=h}return i.length=o,i}function vt(a,r,t,n,e){for(var i=e!==void 0?e:[],o=0,u=0,c=t.length;u<c;++u){var h=t[u];i[o++]=rt(a,r,h,n,i[o]),r=h[h.length-1]}return i.length=o,i}export{G,ut as S,rt as a,ct as b,vt as c,O as d,ht as e,Q as f,it as g,tt as i,d as q,B as r,X as s,E as t};
