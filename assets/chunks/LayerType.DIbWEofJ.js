import{B as g,e as h,c as u,l as a,a as y,g as l}from"./Object.BbzoBtIW.js";import{c as E,a as p,g as S}from"./math.E5ukR3YQ.js";import{S as f}from"./State.DdpVcuyW.js";const R={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"},n={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};var I=function(o){function r(e){o.call(this);var t=h({},e);t[n.OPACITY]=e.opacity!==void 0?e.opacity:1,t[n.VISIBLE]=e.visible!==void 0?e.visible:!0,t[n.Z_INDEX]=e.zIndex,t[n.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[n.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,this.setProperties(t),this.state_=null,this.type}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r.prototype.getType=function(){return this.type},r.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=E(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},r.prototype.getLayersArray=function(t){return p()},r.prototype.getLayerStatesArray=function(t){return p()},r.prototype.getExtent=function(){return this.get(n.EXTENT)},r.prototype.getMaxResolution=function(){return this.get(n.MAX_RESOLUTION)},r.prototype.getMinResolution=function(){return this.get(n.MIN_RESOLUTION)},r.prototype.getOpacity=function(){return this.get(n.OPACITY)},r.prototype.getSourceState=function(){return p()},r.prototype.getVisible=function(){return this.get(n.VISIBLE)},r.prototype.getZIndex=function(){return this.get(n.Z_INDEX)},r.prototype.setExtent=function(t){this.set(n.EXTENT,t)},r.prototype.setMaxResolution=function(t){this.set(n.MAX_RESOLUTION,t)},r.prototype.setMinResolution=function(t){this.set(n.MIN_RESOLUTION,t)},r.prototype.setOpacity=function(t){this.set(n.OPACITY,t)},r.prototype.setVisible=function(t){this.set(n.VISIBLE,t)},r.prototype.setZIndex=function(t){this.set(n.Z_INDEX,t)},r}(g);const _=I;var d=function(o){function r(e){var t=h({},e);delete t.source,o.call(this,t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),a(this,l(n.SOURCE),this.handleSourcePropertyChange_,this);var s=e.source?e.source:null;this.setSource(s)}return o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r,r.prototype.getLayersArray=function(t){var s=t||[];return s.push(this),s},r.prototype.getLayerStatesArray=function(t){var s=t||[];return s.push(this.getLayerState()),s},r.prototype.getSource=function(){var t=this.get(n.SOURCE);return t||null},r.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():f.UNDEFINED},r.prototype.handleSourceChange_=function(){this.changed()},r.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(u(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=a(t,y.CHANGE,this.handleSourceChange_,this)),this.changed()},r.prototype.setMap=function(t){this.mapPrecomposeKey_&&(u(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(u(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=a(t,R.PRECOMPOSE,function(s){var c=s,i=this.getLayerState();i.managed=!1,this.getZIndex()===void 0&&(i.zIndex=1/0),c.frameState.layerStatesArray.push(i),c.frameState.layerStates[S(this)]=i},this),this.mapRenderKey_=a(this,y.CHANGE,t.render,t),this.changed())},r.prototype.setSource=function(t){this.set(n.SOURCE,t)},r}(_);function T(o,r){return o.visible&&r>=o.minResolution&&r<o.maxResolution}const C=d,x={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"};export{_ as B,x as L,R,C as a,T as v};
