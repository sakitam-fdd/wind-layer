import{b as z}from"./Event.BTHd1TaF.js";import{d as w,b as E,c as A}from"./Object.DdgBWT7D.js";import{a as T}from"./has.DEIyT5tI.js";import{d as I}from"./dom.i4NIYYs1.js";var H=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var a=0;for(var t in this.cache_){var r=this.cache_[t];!(a++&3)&&!r.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}},e.prototype.get=function(a,t,r){var n=S(a,t,r);return n in this.cache_?this.cache_[n]:null},e.prototype.set=function(a,t,r,n){var s=S(a,t,r);this.cache_[s]=n,++this.cacheSize_},e.prototype.setSize=function(a){this.maxCacheSize_=a,this.expire()},e}();function S(e,a,t){var r=t?z(t):"null";return a+":"+e+":"+r}var j=new H,K="ol-hidden",P="ol-unselectable",k="ol-control",q="ol-collapsed",N=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),_=["style","variant","weight","size","lineHeight","family"],L=function(e){var a=e.match(N);if(!a)return null;for(var t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},r=0,n=_.length;r<n;++r){var s=a[r+1];s!==void 0&&(t[_[r]]=s)}return t.families=t.family.split(/,\s?/),t},$="10px sans-serif",J="#000",U="round",V=[],Z=0,G="round",Q=10,Y="#000",X="center",ee="middle",ae=[0,0,0,0],te=1,m=new w,D=new E;D.setSize=function(){console.warn("labelCache is deprecated.")};var g=null,C,x={},re=function(){var e=100,a="32px ",t=["monospace","serif"],r=t.length,n="wmytzilWMYTZIL@#/&?$%10",s,h;function f(l,i,o){for(var v=!0,u=0;u<r;++u){var c=t[u];if(h=y(l+" "+i+" "+a+c,n),o!=c){var p=y(l+" "+i+" "+a+o+","+c,n);v=v&&p!=h}}return!!v}function d(){for(var l=!0,i=m.getKeys(),o=0,v=i.length;o<v;++o){var u=i[o];m.get(u)<e&&(f.apply(this,u.split(`
`))?(A(x),g=null,C=void 0,m.set(u,e)):(m.set(u,m.get(u)+1,!0),l=!1))}l&&(clearInterval(s),s=void 0)}return function(l){var i=L(l);if(i)for(var o=i.families,v=0,u=o.length;v<u;++v){var c=o[v],p=i.style+`
`+i.weight+`
`+c;m.get(p)===void 0&&(m.set(p,e,!0),f(i.style,i.weight,c)||(m.set(p,0,!0),s===void 0&&(s=setInterval(d,32))))}}}(),M=function(){var e;return function(a){var t=x[a];if(t==null){if(T){var r=L(a),n=b(a,"Žg"),s=isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight);t=s*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||(e=document.createElement("div"),e.innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=a,document.body.appendChild(e),t=e.offsetHeight,document.body.removeChild(e);x[a]=t}return t}}();function b(e,a){return g||(g=I(1,1)),e!=C&&(g.font=e,C=g.font),g.measureText(a)}function y(e,a){return b(e,a).width}function ie(e,a,t){if(a in t)return t[a];var r=a.split(`
`).reduce(function(n,s){return Math.max(n,y(e,s))},0);return t[a]=r,r}function ne(e,a){for(var t=[],r=[],n=[],s=0,h=0,f=0,d=0,l=0,i=a.length;l<=i;l+=2){var o=a[l];if(o===`
`||l===i){s=Math.max(s,h),n.push(h),h=0,f+=d;continue}var v=a[l+1]||e.font,u=y(v,o);t.push(u),h+=u;var c=M(v);r.push(c),d=Math.max(d,c)}return{width:s,height:f,widths:t,heights:r,lineWidths:n}}function se(e,a,t,r,n,s,h,f,d,l,i){e.save(),t!==1&&(e.globalAlpha*=t),a&&e.setTransform.apply(e,a),r.contextInstructions?(e.translate(d,l),e.scale(i[0],i[1]),B(r,e)):i[0]<0||i[1]<0?(e.translate(d,l),e.scale(i[0],i[1]),e.drawImage(r,n,s,h,f,0,0,h,f)):e.drawImage(r,n,s,h,f,d,l,h*i[0],f*i[1]),e.restore()}function B(e,a){for(var t=e.contextInstructions,r=0,n=t.length;r<n;r+=2)Array.isArray(t[r+1])?a[t[r]].apply(a,t[r+1]):a[t[r]]=t[r+1]}export{P as C,k as a,q as b,m as c,K as d,J as e,G as f,Y as g,te as h,Q as i,U as j,V as k,Z as l,ae as m,X as n,ee as o,$ as p,ne as q,re as r,j as s,se as t,ie as u};
