import{c as rt,n as Ft,d as Zt,f as Pt,D as Lt}from"./easing.BmLONCSm.js";import{c as X,t as xt,a as M,s as L,l as Yt,b as Xt,m as k,g as St}from"./math.E5ukR3YQ.js";import{B as it,d as wt,e as b,V as Gt}from"./Object.BbzoBtIW.js";import{a as P,B as Ot,C as bt,U as ot,r as S,D as W,f as at,E as zt,l as U,F as st,G as Ut,H as Vt,I as Dt,J as $t,m as Ht,q as Kt,K as qt,b as kt,n as ut,i as Wt,L as ht,M as Jt}from"./proj.Cr1UOlyj.js";function Qt(n){return function(e){if(e)return[X(e[0],n[0],n[2]),X(e[1],n[1],n[3])]}}function Bt(n){return n}function jt(n){return function(e,r,t){if(e!==void 0){var i=rt(n,e,t);i=X(i+r,0,n.length-1);var o=Math.floor(i);if(i!=o&&o<n.length-1){var a=n[o]/n[o+1];return n[o]/Math.pow(a,i-o)}else return n[o]}else return}}function te(n,e,r){return function(t,i,o){if(t!==void 0){var a=-o/2+.5,s=Math.floor(Math.log(e/t)/Math.log(n)+a),u=Math.max(s+i,0);return r!==void 0&&(u=Math.min(u,r)),e/Math.pow(n,u)}else return}}function ee(n,e){if(n!==void 0)return 0}function J(n,e){if(n!==void 0)return n+e}function ne(n){var e=2*Math.PI/n;return function(r,t){if(r!==void 0)return r=Math.floor((r+t)/e+.5)*e,r}}function re(n){var e=n||xt(5);return function(r,t){if(r!==void 0)return Math.abs(r+t)<=e?0:r+t}}const F={ANIMATING:0,INTERACTING:1},y={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function ie(n,e){return n[0]+=e[0],n[1]+=e[1],n}function oe(n,e){for(var r=!0,t=n.length-1;t>=0;--t)if(n[t]!=e[t]){r=!1;break}return r}function ae(n,e){var r=Math.cos(e),t=Math.sin(e),i=n[0]*r-n[1]*t,o=n[1]*r+n[0]*t;return n[0]=i,n[1]=o,n}function Ue(n,e){return n[0]*=e,n[1]*=e,n}const w={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},m={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};function lt(n,e,r,t,i,o){for(var a=o||[],s=0,u=e;u<r;u+=t){var h=n[u],l=n[u+1];a[s++]=i[0]*h+i[2]*l+i[4],a[s++]=i[1]*h+i[3]*l+i[5]}return o&&a.length!=s&&(a.length=s),a}function se(n,e,r,t,i,o,a){for(var s=a||[],u=Math.cos(i),h=Math.sin(i),l=o[0],c=o[1],v=0,g=e;g<r;g+=t){var p=n[g]-l,f=n[g+1]-c;s[v++]=l+p*u-f*h,s[v++]=c+p*h+f*u;for(var R=g+2;R<g+t;++R)s[v++]=n[R]}return a&&s.length!=v&&(s.length=v),s}function ue(n,e,r,t,i,o,a,s){for(var u=s||[],h=a[0],l=a[1],c=0,v=e;v<r;v+=t){var g=n[v]-h,p=n[v+1]-l;u[c++]=h+i*g,u[c++]=l+o*p;for(var f=v+2;f<v+t;++f)u[c++]=n[f]}return s&&u.length!=c&&(u.length=c),u}function he(n,e,r,t,i,o,a){for(var s=a||[],u=0,h=e;h<r;h+=t){s[u++]=n[h]+i,s[u++]=n[h+1]+o;for(var l=h+2;l<h+t;++l)s[u++]=n[l]}return a&&s.length!=u&&(s.length=u),s}var ct=new Array(6);function le(){return[1,0,0,1,0,0]}function Ve(n){return V(n,1,0,0,1,0,0)}function vt(n,e){var r=n[0],t=n[1],i=n[2],o=n[3],a=n[4],s=n[5],u=e[0],h=e[1],l=e[2],c=e[3],v=e[4],g=e[5];return n[0]=r*u+i*h,n[1]=t*u+o*h,n[2]=r*l+i*c,n[3]=t*l+o*c,n[4]=r*v+i*g+a,n[5]=t*v+o*g+s,n}function V(n,e,r,t,i,o,a){return n[0]=e,n[1]=r,n[2]=t,n[3]=i,n[4]=o,n[5]=a,n}function De(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function $e(n,e){var r=e[0],t=e[1];return e[0]=n[0]*r+n[2]*t+n[4],e[1]=n[1]*r+n[3]*t+n[5],e}function He(n,e,r){return vt(n,V(ct,e,0,0,r,0,0))}function Ke(n,e,r){return vt(n,V(ct,1,0,0,1,e,r))}function ce(n,e,r,t,i,o,a,s){var u=Math.sin(o),h=Math.cos(o);return n[0]=t*h,n[1]=i*u,n[2]=-t*u,n[3]=i*h,n[4]=a*t*h-s*t*u+e,n[5]=a*i*u+s*i*h+r,n}function qe(n){var e=ve(n);P(e!==0,32);var r=n[0],t=n[1],i=n[2],o=n[3],a=n[4],s=n[5];return n[0]=o/e,n[1]=-t/e,n[2]=-i/e,n[3]=r/e,n[4]=(i*s-o*a)/e,n[5]=-(r*s-t*a)/e,n}function ve(n){return n[0]*n[3]-n[1]*n[2]}var Q=le(),ge=function(n){function e(){n.call(this),this.extent_=at(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return M()},e.prototype.closestPointXY=function(t,i,o,a){return M()},e.prototype.containsXY=function(t,i){return!1},e.prototype.getClosestPoint=function(t,i){var o=i||[NaN,NaN];return this.closestPointXY(t[0],t[1],o,1/0),o},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return M()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Ot(this.extent_,t)},e.prototype.rotate=function(t,i){M()},e.prototype.scale=function(t,i,o){M()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return M()},e.prototype.getType=function(){return M()},e.prototype.applyTransform=function(t){M()},e.prototype.intersectsExtent=function(t){return M()},e.prototype.translate=function(t,i){M()},e.prototype.transform=function(t,i){var o=bt(t),a=o.getUnits()==ot.TILE_PIXELS?function(s,u,h){var l=o.getExtent(),c=o.getWorldExtent(),v=S(c)/S(l);return ce(Q,c[0],c[3],v,-v,0,0,0),lt(s,0,s.length,h,Q,u),W(o,i)(s,u,h)}:W(o,i);return this.applyTransform(a),this},e}(it);const pe=ge;var fe=function(n){function e(){n.call(this),this.layout=m.XY,this.stride=2,this.flatCoordinates=null}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return zt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return M()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(wt(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];var o=this.getSimplifiedGeometryInternal(t),a=o.getFlatCoordinates();return a.length<this.flatCoordinates.length?(this.simplifiedGeometryCache[i]=o,o):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,i){this.stride=B(t),this.layout=t,this.flatCoordinates=i},e.prototype.setCoordinates=function(t,i){M()},e.prototype.setLayout=function(t,i,o){var a;if(t)a=B(t);else{for(var s=0;s<o;++s)if(i.length===0){this.layout=m.XY,this.stride=2;return}else i=i[0];a=i.length,t=Re(a)}this.layout=t,this.stride=a},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,i){var o=this.getFlatCoordinates();if(o){var a=this.getStride();se(o,0,o.length,a,t,i,o),this.changed()}},e.prototype.scale=function(t,i,o){var a=i;a===void 0&&(a=t);var s=o;s||(s=U(this.getExtent()));var u=this.getFlatCoordinates();if(u){var h=this.getStride();ue(u,0,u.length,h,t,a,s,u),this.changed()}},e.prototype.translate=function(t,i){var o=this.getFlatCoordinates();if(o){var a=this.getStride();he(o,0,o.length,a,t,i,o),this.changed()}},e}(pe);function Re(n){var e;return n==2?e=m.XY:n==3?e=m.XYZ:n==4&&(e=m.XYZM),e}function B(n){var e;return n==m.XY?e=2:n==m.XYZ||n==m.XYM?e=3:n==m.XYZM&&(e=4),e}function ke(n,e,r){var t=n.getFlatCoordinates();if(t){var i=n.getStride();return lt(t,0,t.length,i,e,r)}else return null}const D=fe;function gt(n,e,r,t){for(var i=0,o=n[r-t],a=n[r-t+1];e<r;e+=t){var s=n[e],u=n[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function ye(n,e,r,t){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=gt(n,e,s,t),e=s}return i}function j(n,e,r,t,i,o,a){var s=n[e],u=n[e+1],h=n[r]-s,l=n[r+1]-u,c;if(h===0&&l===0)c=e;else{var v=((i-s)*h+(o-u)*l)/(h*h+l*l);if(v>1)c=r;else if(v>0){for(var g=0;g<t;++g)a[g]=Yt(n[e+g],n[r+g],v);a.length=t;return}else c=e}for(var p=0;p<t;++p)a[p]=n[c+p];a.length=t}function pt(n,e,r,t,i){var o=n[e],a=n[e+1];for(e+=t;e<r;e+=t){var s=n[e],u=n[e+1],h=L(o,a,s,u);h>i&&(i=h),o=s,a=u}return i}function de(n,e,r,t,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=pt(n,e,s,t,i),e=s}return i}function ft(n,e,r,t,i,o,a,s,u,h,l){if(e==r)return h;var c,v;if(i===0)if(v=L(a,s,n[e],n[e+1]),v<h){for(c=0;c<t;++c)u[c]=n[e+c];return u.length=t,v}else return h;for(var g=l||[NaN,NaN],p=e+t;p<r;)if(j(n,p-t,p,t,a,s,g),v=L(a,s,g[0],g[1]),v<h){for(h=v,c=0;c<t;++c)u[c]=g[c];u.length=t,p+=t}else p+=t*Math.max((Math.sqrt(v)-Math.sqrt(h))/i|0,1);if(o&&(j(n,r-t,e,t,a,s,g),v=L(a,s,g[0],g[1]),v<h)){for(h=v,c=0;c<t;++c)u[c]=g[c];u.length=t}return h}function _e(n,e,r,t,i,o,a,s,u,h,l){for(var c=l||[NaN,NaN],v=0,g=r.length;v<g;++v){var p=r[v];h=ft(n,e,p,t,i,o,a,s,u,h,c),e=p}return h}function Ce(n,e,r,t){for(var i=0,o=r.length;i<o;++i)n[e++]=r[i];return e}function Rt(n,e,r,t){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<t;++s)n[e++]=a[s];return e}function me(n,e,r,t,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var h=Rt(n,e,r[s],t);o[a++]=h,e=h}return o.length=a,o}function yt(n,e,r,t,i){for(var o=i!==void 0?i:[],a=0,s=e;s<r;s+=t)o[a++]=n.slice(s,s+t);return o.length=a,o}function dt(n,e,r,t,i){for(var o=i!==void 0?i:[],a=0,s=0,u=r.length;s<u;++s){var h=r[s];o[a++]=yt(n,e,h,t,o[a]),e=h}return o.length=a,o}function We(n,e,r,t,i){for(var o=i!==void 0?i:[],a=0,s=0,u=r.length;s<u;++s){var h=r[s];o[a++]=dt(n,e,h,t,o[a]),e=h[h.length-1]}return o.length=a,o}function Me(n,e,r,t,i,o,a){var s=(r-e)/t;if(s<3){for(;e<r;e+=t)o[a++]=n[e],o[a++]=n[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var h=[e,r-t],l=0;h.length>0;){for(var c=h.pop(),v=h.pop(),g=0,p=n[v],f=n[v+1],R=n[c],E=n[c+1],d=v+t;d<c;d+=t){var C=n[d],I=n[d+1],_=Xt(C,I,p,f,R,E);_>g&&(l=d,g=_)}g>i&&(u[(l-e)/t]=1,v+t<l&&h.push(v,l),l+t<c&&h.push(l,c))}for(var A=0;A<s;++A)u[A]&&(o[a++]=n[e+A*t],o[a++]=n[e+A*t+1]);return a}function Z(n,e){return e*Math.round(n/e)}function Ie(n,e,r,t,i,o,a){if(e==r)return a;var s=Z(n[e],i),u=Z(n[e+1],i);e+=t,o[a++]=s,o[a++]=u;var h,l;do if(h=Z(n[e],i),l=Z(n[e+1],i),e+=t,e==r)return o[a++]=h,o[a++]=l,a;while(h==s&&l==u);for(;e<r;){var c=Z(n[e],i),v=Z(n[e+1],i);if(e+=t,!(c==h&&v==l)){var g=h-s,p=l-u,f=c-s,R=v-u;if(g*R==p*f&&(g<0&&f<g||g==f||g>0&&f>g)&&(p<0&&R<p||p==R||p>0&&R>p)){h=c,l=v;continue}o[a++]=h,o[a++]=l,s=h,u=l,h=c,l=v}}return o[a++]=h,o[a++]=l,a}function Ee(n,e,r,t,i,o,a,s){for(var u=0,h=r.length;u<h;++u){var l=r[u];a=Ie(n,e,l,t,i,o,a),s.push(a),e=l}return a}var Ae=function(n){function e(r,t){n.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(r[0])?this.setFlatCoordinates(t,r):this.setCoordinates(r,t)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,i,o,a){return a<st(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ft(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,i,o,a))},e.prototype.getArea=function(){return gt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return yt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Me(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,m.XY)},e.prototype.getType=function(){return w.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Rt(this.flatCoordinates,0,t,this.stride),this.changed()},e}(D);const tt=Ae;var Te=function(n){function e(r,t){n.call(this),this.setCoordinates(r,t)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t},e.prototype.closestPointXY=function(t,i,o,a){var s=this.flatCoordinates,u=L(t,i,s[0],s[1]);if(u<a){for(var h=this.stride,l=0;l<h;++l)o[l]=s[l];return o.length=h,u}else return a},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Ut(this.flatCoordinates,t)},e.prototype.getType=function(){return w.POINT},e.prototype.intersectsExtent=function(t){return Vt(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ce(this.flatCoordinates,0,t,this.stride),this.changed()},e}(D);const Ne=Te;function Fe(n,e,r,t,i){var o=Dt(i,function(a){return!N(n,e,r,t,a[0],a[1])});return!o}function N(n,e,r,t,i,o){for(var a=0,s=n[r-t],u=n[r-t+1];e<r;e+=t){var h=n[e],l=n[e+1];u<=o?l>o&&(h-s)*(o-u)-(i-s)*(l-u)>0&&a++:l<=o&&(h-s)*(o-u)-(i-s)*(l-u)<0&&a--,s=h,u=l}return a!==0}function _t(n,e,r,t,i,o){if(r.length===0||!N(n,e,r[0],t,i,o))return!1;for(var a=1,s=r.length;a<s;++a)if(N(n,r[a-1],r[a],t,i,o))return!1;return!0}function Ze(n,e,r,t,i,o,a){for(var s,u,h,l,c,v,g,p=i[o+1],f=[],R=0,E=r.length;R<E;++R){var d=r[R];for(l=n[d-t],v=n[d-t+1],s=e;s<d;s+=t)c=n[s],g=n[s+1],(p<=v&&g<=p||v<=p&&p<=g)&&(h=(p-v)/(g-v)*(c-l)+l,f.push(h)),l=c,v=g}var C=NaN,I=-1/0;for(f.sort(Ft),l=f[0],s=1,u=f.length;s<u;++s){c=f[s];var _=Math.abs(c-l);_>I&&(h=(l+c)/2,_t(n,e,r,t,h,p)&&(C=h,I=_)),l=c}return isNaN(C)&&(C=i[o]),a?(a.push(C,p,I),a):[C,p,I]}function Pe(n,e,r,t,i,o){for(var a=[n[e],n[e+1]],s=[],u;e+t<r;e+=t){if(s[0]=n[e+t],s[1]=n[e+t+1],u=i.call(o,a,s),u)return u;a[0]=s[0],a[1]=s[1]}return!1}function Ct(n,e,r,t,i){var o=$t(at(),n,e,r,t);return Ht(i,o)?Kt(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:Pe(n,e,r,t,function(a,s){return qt(i,a,s)}):!1}function Le(n,e,r,t,i){return!!(Ct(n,e,r,t,i)||N(n,e,r,t,i[0],i[1])||N(n,e,r,t,i[0],i[3])||N(n,e,r,t,i[2],i[1])||N(n,e,r,t,i[2],i[3]))}function xe(n,e,r,t,i){if(!Le(n,e,r[0],t,i))return!1;if(r.length===1)return!0;for(var o=1,a=r.length;o<a;++o)if(Fe(n,r[o-1],r[o],t,i)&&!Ct(n,r[o-1],r[o],t,i))return!1;return!0}function Ye(n,e,r,t){for(;e<r-t;){for(var i=0;i<t;++i){var o=n[e+i];n[e+i]=n[r-t+i],n[r-t+i]=o}e+=t,r-=t}}function mt(n,e,r,t){for(var i=0,o=n[r-t],a=n[r-t+1];e<r;e+=t){var s=n[e],u=n[e+1];i+=(s-o)*(u+a),o=s,a=u}return i>0}function Xe(n,e,r,t,i){for(var o=i!==void 0?i:!1,a=0,s=r.length;a<s;++a){var u=r[a],h=mt(n,e,u,t);if(a===0){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;e=u}return!0}function et(n,e,r,t,i){for(var o=i!==void 0?i:!1,a=0,s=r.length;a<s;++a){var u=r[a],h=mt(n,e,u,t),l=a===0?o&&h||!o&&!h:o&&!h||!o&&h;l&&Ye(n,e,u,t),e=u}return e}var Se=function(n){function e(r,t,i){n.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,r),this.ends_=i):this.setCoordinates(r,t)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Zt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,i,o,a){return a<st(this.getExtent(),t,i)?a:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(de(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),_e(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,o,a))},e.prototype.containsXY=function(t,i){return _t(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,i)},e.prototype.getArea=function(){return ye(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var i;return t!==void 0?(i=this.getOrientedFlatCoordinates().slice(),et(i,0,this.ends_,this.stride,t)):i=this.flatCoordinates,dt(i,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=U(this.getExtent());this.flatInteriorPoint_=Ze(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ne(this.getFlatInteriorPoint(),m.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new tt(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,i=this.flatCoordinates,o=this.ends_,a=[],s=0,u=0,h=o.length;u<h;++u){var l=o[u],c=new tt(i.slice(s,l),t);a.push(c),s=l}return a},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Xe(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=et(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],o=[];return i.length=Ee(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,o),new e(i,m.XY,o)},e.prototype.getType=function(){return w.POLYGON},e.prototype.intersectsExtent=function(t){return xe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,i){this.setLayout(i,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=me(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=o.length===0?0:o[o.length-1],this.changed()},e}(D);function nt(n){var e=n[0],r=n[1],t=n[2],i=n[3],o=[e,r,e,i,t,i,t,r,e,r];return new Se(o,m.XY,[o.length])}var z=0,we=function(n){function e(r){n.call(this);var t=b({},r);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=ht(t.projection,"EPSG:3857"),this.applyOptions_(t)}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var i={};i[y.CENTER]=t.center!==void 0?t.center:null;var o=It(t);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=o.minZoom;var a=Mt(t),s=o.constraint,u=Et(t);this.constraints_={center:a,resolution:s,rotation:u},t.resolution!==void 0?i[y.RESOLUTION]=t.resolution:t.zoom!==void 0&&(i[y.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(i[y.RESOLUTION]=X(Number(this.getResolution()||i[y.RESOLUTION]),this.minResolution_,this.maxResolution_))),i[y.ROTATION]=t.rotation!==void 0?t.rotation:0,this.setProperties(i),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var i=b({},this.options_);return i.resolution!==void 0?i.resolution=this.getResolution():i.zoom=this.getZoom(),i.center=this.getCenter(),i.rotation=this.getRotation(),b({},i,t)},e.prototype.animate=function(t){var i=arguments,o=arguments.length,a;if(o>1&&typeof arguments[o-1]=="function"&&(a=arguments[o-1],--o),!this.isDef()){var s=arguments[o-1];s.center&&this.setCenter(s.center),s.zoom!==void 0&&this.setZoom(s.zoom),s.rotation!==void 0&&this.setRotation(s.rotation),a&&Y(a,!0);return}for(var u=Date.now(),h=this.getCenter().slice(),l=this.getResolution(),c=this.getRotation(),v=[],g=0;g<o;++g){var p=i[g],f={start:u,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||Pt};if(p.center&&(f.sourceCenter=h,f.targetCenter=p.center,h=f.targetCenter),p.zoom!==void 0?(f.sourceResolution=l,f.targetResolution=this.constrainResolution(this.maxResolution_,p.zoom-this.minZoom_,0),l=f.targetResolution):p.resolution&&(f.sourceResolution=l,f.targetResolution=p.resolution,l=f.targetResolution),p.rotation!==void 0){f.sourceRotation=c;var R=k(p.rotation-c+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=c+R,c=f.targetRotation}f.callback=a,At(f)?f.complete=!0:u+=f.duration,v.push(f)}this.animations_.push(v),this.setHint(F.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[F.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[F.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(F.ANIMATING,-this.hints_[F.ANIMATING]);for(var t=0,i=this.animations_.length;t<i;++t){var o=this.animations_[t];o[0].callback&&Y(o[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var t=Date.now(),i=!1,o=this.animations_.length-1;o>=0;--o){for(var a=this.animations_[o],s=!0,u=0,h=a.length;u<h;++u){var l=a[u];if(!l.complete){var c=t-l.start,v=l.duration>0?c/l.duration:1;v>=1?(l.complete=!0,v=1):s=!1;var g=l.easing(v);if(l.sourceCenter){var p=l.sourceCenter[0],f=l.sourceCenter[1],R=l.targetCenter[0],E=l.targetCenter[1],d=p+g*(R-p),C=f+g*(E-f);this.set(y.CENTER,[d,C])}if(l.sourceResolution&&l.targetResolution){var I=g===1?l.targetResolution:l.sourceResolution+g*(l.targetResolution-l.sourceResolution);l.anchor&&this.set(y.CENTER,this.calculateCenterZoom(I,l.anchor)),this.set(y.RESOLUTION,I)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){var _=g===1?k(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+g*(l.targetRotation-l.sourceRotation);l.anchor&&this.set(y.CENTER,this.calculateCenterRotate(_,l.anchor)),this.set(y.ROTATION,_)}if(i=!0,!l.complete)break}}if(s){this.animations_[o]=null,this.setHint(F.ANIMATING,-1);var A=a[0].callback;A&&Y(A,!0)}}this.animations_=this.animations_.filter(Boolean),i&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,i){var o,a=this.getCenter();return a!==void 0&&(o=[a[0]-i[0],a[1]-i[1]],ae(o,t-this.getRotation()),ie(o,i)),o},e.prototype.calculateCenterZoom=function(t,i){var o,a=this.getCenter(),s=this.getResolution();if(a!==void 0&&s!==void 0){var u=i[0]-t*(i[0]-a[0])/s,h=i[1]-t*(i[1]-a[1])/s;o=[u,h]}return o},e.prototype.getSizeFromViewport_=function(){var t=[100,100],i='.ol-viewport[data-view="'+St(this)+'"]',o=document.querySelector(i);if(o){var a=getComputedStyle(o);t[0]=parseInt(a.width,10),t[1]=parseInt(a.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,i,o){var a=i||0,s=o||0;return this.constraints_.resolution(t,a,s)},e.prototype.constrainRotation=function(t,i){var o=i||0;return this.constraints_.rotation(t,o)},e.prototype.getCenter=function(){return this.get(y.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var i=t||this.getSizeFromViewport_(),o=this.getCenter();P(o,1);var a=this.getResolution();P(a!==void 0,2);var s=this.getRotation();return P(s!==void 0,3),kt(o,a,s,i)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(y.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,i){var o=i||this.getSizeFromViewport_(),a=ut(t)/o[0],s=S(t)/o[1];return Math.max(a,s)},e.prototype.getResolutionForValueFunction=function(t){var i=t||2,o=this.maxResolution_,a=this.minResolution_,s=Math.log(o/a)/Math.log(i);return function(u){var h=o/Math.pow(i,u*s);return h}},e.prototype.getRotation=function(){return this.get(y.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var i=t||2,o=this.maxResolution_,a=this.minResolution_,s=Math.log(o/a)/Math.log(i);return function(u){var h=Math.log(o/u)/Math.log(i)/s;return h}},e.prototype.getState=function(t){var i=this.getCenter(),o=this.getProjection(),a=this.getResolution(),s=a/t,u=this.getRotation();return{center:[Math.round(i[0]/s)*s,Math.round(i[1]/s)*s],projection:o!==void 0?o:null,resolution:a,rotation:u,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,i=this.getResolution();return i!==void 0&&(t=this.getZoomForResolution(i)),t},e.prototype.getZoomForResolution=function(t){var i=this.minZoom_||0,o,a;if(this.resolutions_){var s=rt(this.resolutions_,t,1);i=s,o=this.resolutions_[s],s==this.resolutions_.length-1?a=2:a=o/this.resolutions_[s+1]}else o=this.maxResolution_,a=this.zoomFactor_;return i+Math.log(o/t)/Math.log(a)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,i){var o=i||{},a=o.size;a||(a=this.getSizeFromViewport_());var s;P(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)?(P(!Wt(t),25),s=nt(t)):t.getType()===w.CIRCLE?(t=t.getExtent(),s=nt(t),s.rotate(this.getRotation(),U(t))):s=t;var u=o.padding!==void 0?o.padding:[0,0,0,0],h=o.constrainResolution!==void 0?o.constrainResolution:!0,l=o.nearest!==void 0?o.nearest:!1,c;o.minResolution!==void 0?c=o.minResolution:o.maxZoom!==void 0?c=this.constrainResolution(this.maxResolution_,o.maxZoom-this.minZoom_,0):c=0;for(var v=s.getFlatCoordinates(),g=this.getRotation(),p=Math.cos(-g),f=Math.sin(-g),R=1/0,E=1/0,d=-1/0,C=-1/0,I=s.getStride(),_=0,A=v.length;_<A;_+=I){var $=v[_]*p-v[_+1]*f,H=v[_]*f+v[_+1]*p;R=Math.min(R,$),E=Math.min(E,H),d=Math.max(d,$),C=Math.max(C,H)}var T=this.getResolutionForExtent([R,E,d,C],[a[0]-u[1]-u[3],a[1]-u[0]-u[2]]);if(T=isNaN(T)?c:Math.max(T,c),h){var x=this.constrainResolution(T,0,0);!l&&x<T&&(x=this.constrainResolution(x,-1,0)),T=x}f=-f;var G=(R+d)/2,O=(E+C)/2;G+=(u[1]-u[3])/2*T,O+=(u[0]-u[2])/2*T;var Tt=G*p-O*f,Nt=O*p+G*f,K=[Tt,Nt],q=o.callback?o.callback:Gt;o.duration!==void 0?this.animate({resolution:T,center:K,duration:o.duration,easing:o.easing},q):(this.setResolution(T),this.setCenter(K),Y(q,!0))},e.prototype.centerOn=function(t,i,o){var a=this.getRotation(),s=Math.cos(-a),u=Math.sin(-a),h=t[0]*s-t[1]*u,l=t[1]*s+t[0]*u,c=this.getResolution();h+=(i[0]/2-o[0])*c,l+=(o[1]-i[1]/2)*c,u=-u;var v=h*s-l*u,g=l*s+h*u;this.setCenter([v,g])},e.prototype.isDef=function(){return!!this.getCenter()&&this.getResolution()!==void 0},e.prototype.rotate=function(t,i){if(i!==void 0){var o=this.calculateCenterRotate(t,i);this.setCenter(o)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(y.CENTER,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,i){return this.hints_[t]+=i,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(y.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(y.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(it);function Y(n,e){setTimeout(function(){n(e)},0)}function Mt(n){return n.extent!==void 0?Qt(n.extent):Bt}function It(n){var e,r,t,i=28,o=2,a=n.minZoom!==void 0?n.minZoom:z,s=n.maxZoom!==void 0?n.maxZoom:i,u=n.zoomFactor!==void 0?n.zoomFactor:o;if(n.resolutions!==void 0){var h=n.resolutions;r=h[a],t=h[s]!==void 0?h[s]:h[h.length-1],e=jt(h)}else{var l=ht(n.projection,"EPSG:3857"),c=l.getExtent(),v=c?Math.max(ut(c),S(c)):360*Jt[ot.DEGREES]/l.getMetersPerUnit(),g=v/Lt/Math.pow(o,z),p=g/Math.pow(o,i-z);r=n.maxResolution,r!==void 0?a=0:r=g/Math.pow(u,a),t=n.minResolution,t===void 0&&(n.maxZoom!==void 0?n.maxResolution!==void 0?t=r/Math.pow(u,s):t=g/Math.pow(u,s):t=p),s=a+Math.floor(Math.log(r/t)/Math.log(u)),t=r/Math.pow(u,s-a),e=te(u,r,s-a)}return{constraint:e,maxResolution:r,minResolution:t,minZoom:a,zoomFactor:u}}function Et(n){var e=n.enableRotation!==void 0?n.enableRotation:!0;if(e){var r=n.constrainRotation;return r===void 0||r===!0?re():r===!1?J:typeof r=="number"?ne(r):J}else return ee}function At(n){return!(n.sourceCenter&&n.targetCenter&&!oe(n.sourceCenter,n.targetCenter)||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation)}const Je=Object.freeze(Object.defineProperty({__proto__:null,createCenterConstraint:Mt,createResolutionConstraint:It,createRotationConstraint:Et,default:we,isNoopAnimation:At},Symbol.toStringTag,{value:"Module"}));export{w as G,Se as P,F as V,$e as a,we as b,le as c,ie as d,ee as e,ce as f,ke as g,De as h,qe as i,We as j,dt as k,yt as l,Z as m,Ve as n,He as o,Ke as p,Je as q,ae as r,Ue as s,lt as t};
